<div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h4>{{labels?.leadID}} {{leadID}}</h4>
      <div class="disbursement-top-section">
        <!-- <div class="row">
            <div class="col-md-12">
              <div class="form-group mb-0">
                <label class="col-form-label" for="lead_created_by">{{labels?.leadID}} </label>
                <label for="lead_created_by_name" class="col-form-label-two">12132</label>
              </div>
            </div>
          </div> -->

        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="lead_created_by">{{labels?.approvedLoanAmount}}</label>
              <!-- <label for="lead_created_by_name" class="col-form-label-two">1212</label> -->
              <p>{{loanDetailsData['approvedAmount'] ? loanDetailsData['approvedAmount'] : 0}}</p>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="lead_created_by">{{labels?.approvedIRR}}</label>
              <!-- <label for="lead_created_by_name" class="col-form-label-two">test</label> -->
              <p>{{loanDetailsData['approvedIRR'] ? loanDetailsData['approvedIRR'] : 0}}</p>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="customer_name_label">{{labels?.approvedTenor}}</label>
              <!-- <label for="customer_name" class="col-form-label-two">tenor</label> -->
              <p>{{loanDetailsData['approvedTenor'] ? loanDetailsData['approvedTenor'] : 0}}</p>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-md-12">
            <h4>Deductions</h4>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="lead_created_by">{{labels?.chargesAndFees}}</label>
              <!-- <label for="lead_created_by_name" class="col-form-label-two">1212</label> -->
              <p>{{loanDetailsData['chargesFees'] ? loanDetailsData['chargesFees'] : 0}}</p>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="lead_created_by">{{labels?.crossSellInsurance}}</label>
              <!-- <label for="lead_created_by_name" class="col-form-label-two">test</label> -->
              <p>{{loanDetailsData['insuranceAmnt'] ? loanDetailsData['insuranceAmnt'] : 0}}</p>
            </div>
          </div>
          <div class="col-lg-4 col-md-4 col-sm-12">
            <div class="form-group mb-0">
              <label for="customer_name_label">{{labels?.crossSellOthers}}</label>
              <!-- <label for="customer_name" class="col-form-label-two">tenor</label> -->
              <p>{{loanDetailsData['crossSellOthers'] ? loanDetailsData['crossSellOthers'] : 0}}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="content" id="disbursement-memo">
  <form class="multisteps-form__form form-horizontal" autocomplete="off">
    <!-- default container -->
    <div class="multisteps-form__panel js-active" data-animation="scaleIn">
      <div class="row">
        <div class="text-right">
          <form [formGroup]="disbursementDetailsForm">
          <div class="form-group">
            <label for="disburse_To" class="control-label disburse-label">{{labels?.disburseTo}}</label>
            <div class="disburse-select">
              <mat-form-field>
                <mat-select [(ngModel)]="disburseTo" id="disburseTo" 
                  formControlName="disburseTo" multiple 
                  (selectionChange)="disburseToVal(disburseTo)" >
                  <mat-option *ngFor="let x of disburseToLov" [value]="x.key">{{x.value}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div *ngIf="disbursementDetailsForm.controls.disburseTo.invalid && (disbursementDetailsForm.controls.disburseTo.dirty || disbursementDetailsForm.controls.disburseTo.touched)"
              class="invalid-feedback">
              Disburse To is Required
            </div>
          </div>
        </form>
        </div>
      </div>
      <!--container 1-->
      <form [formGroup]="dealerDetailsForm" *ngIf="disburseToDealer">
        <div>
          <h4 class="title">Dealer Details</h4>
          <div class="form-group">
            <label for="sourcing_code" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.dealerCode}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="ng-autocomplete col-sm-6 col-md-4 col-lg-3">
              <!-- <ng-autocomplete [data]="dealerCodeData" [(ngModel)]="dealerCode" (inputChanged)='onDealerCodeSearch($event)' formControlName="dealerCode" [placeHolder]="'Dealer Code'" [minQueryLength]="2">
              </ng-autocomplete> -->
              <ng-autocomplete 
                  [data]="dealerCodeData"
                  [(ngModel)]="dealerCode"
                  [searchKeyword]="keyword"
                  (selected)='selectDealerEvent($event)'
                  (inputChanged)='onDealerCodeSearch($event,false)'
                  [itemTemplate]="dealerCodeTemplate"
                  [notFoundTemplate]="notFoundTemplate"
                  formControlName="dealerCode"
                  [placeHolder]="'Dealer Code'"
                  [minQueryLength]="2">                                 
                </ng-autocomplete>               
                <ng-template #dealerCodeTemplate let-item>
                <a [innerHTML]="item.dealorName"></a>
                </ng-template>               
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.dealerName}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input id="dealerBeneficiaryName" [(ngModel)]="dealerObjInfo['beneficiaryName']" [isRequired]="'Dealer Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" name="Dealer Name" [className]="'form-control mandatory'" [placeholder]="'Dealer Name'"
                 [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="dealerDisbursementAmount" [(ngModel)]="dealerObjInfo['disbursementAmount']" [isRequired]="'Disbursement Amount is required'" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,1)">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [values]="paymentLov" [(ngModel)]="dealerObjInfo['paymentMethod']" [isRequired]="'Mode of Payment is required'" formControlName="paymentMethod" (change)="setModeOfPayment($event,'dealer')" [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>
            <div class="form-group" *ngIf="showBankDetails || showCASADetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input id="dealerBenAccNo" [(ngModel)]="dealerObjInfo['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'" [maxLength]="labels?.validationData?.accountNumber?.maxLength"
                [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
                </app-custom-input>
              </div>
            </div>
          <div *ngIf="showBankDetails">            
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <ng-autocomplete 
                  class="custom-select-box"
                  [data]="dealerBankListData"
                  [(ngModel)]="dealerObjInfo['beneficiaryBank']"
                  [searchKeyword]="dealerkeyword"
                  (selected)='selectBankNameEvent($event,1)'
                  (inputChanged)='onBankNameSearch($event,1)'
                  [itemTemplate]="bankNameTemplate"
                  [notFoundTemplate]="notFoundTemplate"
                  formControlName="beneficiaryBank"
                  [placeHolder]="'Beneficiary Bank'"
                  [minQueryLength]="3">                                 
                </ng-autocomplete>               
                <ng-template #bankNameTemplate let-item>
                <a [innerHTML]="item"></a>
                </ng-template>               
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="dealerBenBranch" [(ngModel)]="dealerObjInfo['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input> -->
                <!-- <app-vf-custom-select [values]="bankDealerDetailsData" [(ngModel)]="dealerObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'dealer')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
                </app-vf-custom-select> -->
                <select class="form-control" [(ngModel)]="dealerObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'dealer')">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankDealerDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="dealerDetailsForm.controls.beneficiaryBranch.invalid && (dealerDetailsForm.controls.beneficiaryBranch.dirty || dealerDetailsForm.controls.beneficiaryBranch.touched)"
                  class="invalid-feedback-disburse">
                  Beneficiary Branch is required
                </div>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input id="dealerIFSC" [(ngModel)]="dealerObjInfo['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                  [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" [hidden]="true">
              <label for="mobile_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{ labels?.mobileNumber }}
                <!-- <sub class="star_red_col">*</sub> -->
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-custom-input formControlName="mobilePhone" id="dealermobilePhone" [(ngModel)]="dealerObjInfo['mobilePhone']" [placeholder]="'Mobile Number'" [maxLength]="mobileLength" [isDirty]="isDirty" [type]="'number'"
                    [patternCheck]="labels.validationData?.mobileNumber.pattern">
                  </app-custom-input>
                </div>
            </div>
          </div>
          <div *ngIf="showDDDetails">
            <div class="form-group">
              <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-vf-custom-select [values]="instrumentTypeLov" [(ngModel)]="dealerObjInfo['instrumentType']" [isRequired]="'Instrument Type is required'" (change)="setIntType($event.target.value,'dealer')" formControlName="instrumentType" [isDirty]="isDirty">
                </app-vf-custom-select>
              </div>
            </div>
            <div class="form-group" *ngIf="showDealerIntDetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input [(ngModel)]="dealerObjInfo['instrumentNumber']" 
                  id="dealerInstrumentNumber"
                  [isRequired]="'Instrument Number is required'" 
                  formControlName="instrumentNumber" 
                  [className]="'form-control mandatory'" 
                  [placeholder]="'Instrument Number'"
                  [isDirty]="isDirty"
                  [maxLength]="labels?.validationData?.instrumentNumber?.maxLength"
                  [type]="'number'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" *ngIf="showDealerIntDetails">
              <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                  placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="dealerObjInfo['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                </app-vf-custom-select>          -->
                <ng-autocomplete 
                  class="custom-select-box" [data]="dealerfavBODListData" [(ngModel)]="dealerObjInfo['favouringBankOfDraw']"
                  [searchKeyword]="dealerFavkeyword" (selected)='selectBankNameEvent($event,10)' (inputChanged)='onBankNameSearch($event,10)'
                  [itemTemplate]="favBankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                  [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                </ng-autocomplete>               
                <ng-template #favBankNameTemplate let-item>
                <a [innerHTML]="item"></a>
                </ng-template>               
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="dealerFavBankBranch" [(ngModel)]="dealerObjInfo['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input> -->
                <select class="form-control" [(ngModel)]="dealerObjInfo['favouringBankBranch']" formControlName="favouringBankBranch">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankDealerFavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="dealerDetailsForm.controls.favouringBankBranch.invalid && (dealerDetailsForm.controls.favouringBankBranch.dirty || dealerDetailsForm.controls.favouringBankBranch.touched)"
                  class="invalid-feedback-disburse">
                  Favouring Bank Branch is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group" *ngIf="showCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="dealerLoanNumber" [(ngModel)]="dealerObjInfo['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength"  [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                 [isDirty]="isDirty" [type]="'number'">
              </app-custom-input>
            </div>
          </div> -->

          <div class="form-group" *ngIf="showDDDetails || showBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="dealerAddLine1" [(ngModel)]="dealerObjInfo['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
              <!-- <textarea class="form-control" formControlName="address" placeholder="Address......"></textarea> --> 
            </div>
          </div>
          <div class="form-group" *ngIf="showDDDetails || showBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="dealerAddLine2" [(ngModel)]="dealerObjInfo['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showDDDetails || showBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="dealerAddLine3" [(ngModel)]="dealerObjInfo['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="toDeductCharges1" [(ngModel)]="dealerObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges1"
                [checked]="dealerObjInfo['deductChargesFlag']" (change)="selectCheckBox(dealerObjInfo['deductChargesFlag'],1)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input type="checkbox" id="disburseinTranches" [(ngModel)]="dealerObjInfo['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="disburseinTranches"
                [checked]="dealerObjInfo['trancheDisbursementFlag']" (change)="selectTranche(dealerObjInfo['trancheDisbursementFlag'],1,false)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
            </div>
          </div>
          <div class="row" *ngIf="showTrancheTable">
            <form [formGroup]="trancheDealerForm">
              <div class="disbursement-table-section">
                  <table formArrayName="trancheDealerArray" class="table disbursement-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>{{labels?.disbursementType}}</th>
                          <th>{{labels?.disbursementPercent}}</th>
                          <th>{{labels?.disbursementAmount}}</th>
                          <th>{{labels?.disbursementDate}}</th>
                          <th>{{labels?.action}}</th>                   
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trance of trancheDealerForm['controls'].trancheDealerArray['controls']; let i=index" [formGroupName]="i">
                          <td width="8%">
                            <div>
                              Tranche {{i+1}}
                            </div>
                          </td>
                          <td width="15%">
                            <div class="viewable-field">
                                <app-custom-input [hidden]="true" [(ngModel)]="trancheDealerList[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                 </app-custom-input>
                                 <app-custom-input [hidden]="true" [(ngModel)]="trancheDealerList[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                  </app-custom-input>
                              <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                <mat-select [(ngModel)]="trancheDealerList[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                  <mat-option value=""> Select </mat-option>
                                  <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </td>
                          <td width="15%">
                            <!-- <input type="text"  class="form-control text-field" [(ngModel)]="trancheDealerList[i].disbursement_percentage"
                               name="trancheDealerList[i].disbursement_percentage" formControlName="disbursement_percentage" />                         -->
                               <app-custom-input [(ngModel)]="trancheDealerList[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                         [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheDealerList,'1',i)">
                          </app-custom-input>
                          </td>
                          <td width="15%">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheDealerList[i].tranche_disbursement_amount"
                              name="trancheDealerList[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                              [readOnly]="true" />
                          </td>
                          <td width="18%">
                            <div *ngIf="i==0">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheDealerList[i].trancheDisburseDate"
                               name="trancheDealerList[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                         <!-- <kendo-datepicker class="form-control mandatory" formControlName="trancheDisburseDate" [(ngModel)]="trancheDealerList[i].trancheDisburseDate" [format]="'dd/MM/yyyy'" 
                           placeholder="tranche Date" [activeView]="'decade'" [disabled]='true'></kendo-datepicker> -->
                            </div>
                          </td>
                          <td class="text-center" width="10%">
                            <div>
                              <button class="delete-btn mr-8" (click)="deleteRow(i,1)" title="delete">
                              <img src="assets/images/delete-icon.png" />
                              </button>
                              <button class="plus-btn" (click)="addRow('1')" [disabled]="trancheDealerForm.invalid" title="add">
                                <img src="assets/images/plus-icon.png" />
                              </button>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
              </div>
            </form>
       </div>
        </div>
      </form>
      <!--container 2-->
      <form [formGroup]="appDetailsForm" *ngIf="disburseToApp">
        <div>
          <h4 class="title">Applicant Details</h4>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input [(ngModel)]="applicantObjInfo['beneficiaryName']" id="appBeneficiaryName" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'" [placeholder]="'Applicant Name'"
              [type]="'text'" [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>
        <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appDisbursementAmount" [(ngModel)]="applicantObjInfo['disbursementAmount']" [isRequired]="'Disbursement Amount is required'" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,2)">
              </app-custom-input>
            </div>
          </div>
        <div class="form-group">
            <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [values]="paymentLov" [(ngModel)]="applicantObjInfo['paymentMethod']" [isRequired]="'Mode of Payment is required'" formControlName="paymentMethod" (change)="setModeOfPayment($event,'applicant')" [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>
          <div class="form-group" *ngIf="showAppBankDetails || showAppCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appBenAccNo" [(ngModel)]="applicantObjInfo['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
              [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>
        <div *ngIf="showAppBankDetails">          
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <ng-autocomplete
                class="custom-select-box" 
                [data]="appBankListData"
                [(ngModel)]="applicantObjInfo['beneficiaryBank']"
                [searchKeyword]="appkeyword"
                (selected)='selectBankNameEvent($event,2)'
                (inputChanged)='onBankNameSearch($event,2)'
                [itemTemplate]="bankNameTemplate"
                [notFoundTemplate]="notFoundTemplate"
                formControlName="beneficiaryBank"
                [placeHolder]="'Beneficiary Bank'"
                [minQueryLength]="3">                                 
              </ng-autocomplete>               
              <ng-template #bankNameTemplate let-item>
              <a [innerHTML]="item"></a>
              </ng-template>               
              <ng-template #notFoundTemplate let-notFound>
              <div [innerHTML]="notFound"></div>
              </ng-template>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
            <sub class="star_red_col">*</sub></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <!-- <app-custom-input id="appBenBranch" [(ngModel)]="applicantObjInfo['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                [isDirty]="isDirty" [type]="'alpha'">
              </app-custom-input> -->
              <!-- <app-vf-custom-select [values]="bankAppDetailsData" [(ngModel)]="applicantObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'applicant')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
              </app-vf-custom-select> -->
              <select class="form-control" [(ngModel)]="applicantObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'applicant')">
                <option value=''>-- select one --</option>
                <option *ngFor="let item of bankAppDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
              </select>
              <div *ngIf="appDetailsForm.controls.beneficiaryBranch.invalid && (appDetailsForm.controls.beneficiaryBranch.dirty || appDetailsForm.controls.beneficiaryBranch.touched)"
                  class="invalid-feedback-disburse">
                  Beneficiary Branch is required
                </div>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appIFSC" [(ngModel)]="applicantObjInfo['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group" [hidden]="true">
            <label for="mobile_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{ labels?.mobileNumber }}
              <!-- <sub class="star_red_col">*</sub>-->
              </label> 
              <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input formControlName="mobilePhone" id="applicantMobilePhone" [(ngModel)]="applicantObjInfo['mobilePhone']" [placeholder]="'Mobile Number'" [maxLength]="mobileLength" [isDirty]="isDirty" [type]="'number'"
                  [patternCheck]="labels.validationData?.mobileNumber.pattern">
                </app-custom-input>
              </div>
          </div>
        </div>
          <div *ngIf="showAppDDDetails">
            <div class="form-group">
              <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-vf-custom-select [values]="instrumentTypeLov" [(ngModel)]="applicantObjInfo['instrumentType']" [isRequired]="'Instrument Type is required'" (change)="setIntType($event.target.value,'applicant')" formControlName="instrumentType" [isDirty]="isDirty">
                </app-vf-custom-select>
              </div>
            </div>
            <div class="form-group" *ngIf="showAppIntDetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input 
                [(ngModel)]="applicantObjInfo['instrumentNumber']"
                id="appInstrumentNumber"
                [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                  [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" *ngIf="showAppIntDetails">
              <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                  placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="applicantObjInfo['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                </app-vf-custom-select>               -->
                <ng-autocomplete 
                  class="custom-select-box" [data]="appfavBODListData" [(ngModel)]="applicantObjInfo['favouringBankOfDraw']"
                  [searchKeyword]="appFavFavkeyword" (selected)='selectBankNameEvent($event,11)' (inputChanged)='onBankNameSearch($event,11)'
                  [itemTemplate]="favAppBankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                  [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                </ng-autocomplete>               
                <ng-template #favAppBankNameTemplate let-item>
                <a [innerHTML]="item"></a>
                </ng-template>               
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="appFavBankBranch" [(ngModel)]="applicantObjInfo['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input> -->
                <select class="form-control" [(ngModel)]="applicantObjInfo['favouringBankBranch']" formControlName="favouringBankBranch">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankAppFavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="appDetailsForm.controls.favouringBankBranch.invalid && (appDetailsForm.controls.favouringBankBranch.dirty || appDetailsForm.controls.favouringBankBranch.touched)"
                  class="invalid-feedback-disburse">
                  Favouring Bank Branch is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group" *ngIf="showAppCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appLoanNumber" [(ngModel)]="applicantObjInfo['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                [isDirty]="isDirty" [type]="'number'">
              </app-custom-input>
            </div>
          </div> -->

          
          <div class="form-group" *ngIf="showAppDDDetails || showAppBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appAddLine1" [(ngModel)]="applicantObjInfo['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showAppDDDetails || showAppBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appAddLine2" [(ngModel)]="applicantObjInfo['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showAppDDDetails || showAppBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="appAddLine3" [(ngModel)]="applicantObjInfo['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>


          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="toDeductCharges2" [(ngModel)]="applicantObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges2"
                [checked]="applicantObjInfo['deductChargesFlag']" (change)="selectCheckBox(applicantObjInfo['deductChargesFlag'],2)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input type="checkbox" id="appInTranches" [(ngModel)]="applicantObjInfo['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="appInTranches"
                [checked]="applicantObjInfo['trancheDisbursementFlag']" (change)="selectTranche(applicantObjInfo['trancheDisbursementFlag'],2,false)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
            </div>
          </div>
          <div class="row" *ngIf="showAppTrancheTable">
            <form [formGroup]="trancheAppForm">
              <div class="disbursement-table-section">
                  <table formArrayName="trancheAppArray" class="table disbursement-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>{{labels?.disbursementType}}</th>
                          <th>{{labels?.disbursementPercent}}</th>
                          <th>{{labels?.disbursementAmount}}</th>
                          <th>{{labels?.disbursementDate}}</th>
                          <th>{{labels?.action}}</th>                   
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trance of trancheAppForm['controls'].trancheAppArray['controls']; let i=index" [formGroupName]="i">
                          <td width="8%">
                            <div>
                              Tranche {{i+1}}
                            </div>
                          </td>
                          <td width="15%">
                            <div class="viewable-field">
                                <app-custom-input [hidden]="true" [(ngModel)]="trancheAppList[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                 </app-custom-input>
                                 <app-custom-input [hidden]="true" [(ngModel)]="trancheAppList[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                  </app-custom-input>
                              <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                <mat-select [(ngModel)]="trancheAppList[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                  <mat-option value=""> Select </mat-option>
                                  <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </td>
                          <td width="15%">
                            <!-- <input type="text"  class="form-control text-field" [(ngModel)]="trancheAppList[i].disbursement_percentage"
                               name="trancheAppList[i].disbursement_percentage" formControlName="disbursement_percentage" /> -->
                               <app-custom-input [(ngModel)]="trancheAppList[i].disbursement_percentage" [formControl]="trance.controls['disbursement_percentage']"  [className]="'form-control'" 
                         [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheAppList,'2',i)">
                          </app-custom-input>                        
                          </td>
                          <td width="15%">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheAppList[i].tranche_disbursement_amount"
                              name="trancheAppList[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                              [readOnly]="true" />
                          </td>
                          <td width="18%">
                            <div *ngIf="i==0">
                              <input type="text"  class="form-control text-field" [(ngModel)]="trancheAppList[i].trancheDisburseDate"
                               name="trancheAppList[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                         <!-- <kendo-datepicker class="form-control mandatory" formControlName="trancheDisburseDate" [(ngModel)]="trancheAppList[i].trancheDisburseDate" [format]="'dd/MM/yyyy'" 
                           placeholder="tranche Date" [activeView]="'decade'"></kendo-datepicker> -->
                           </div>
                          </td>
                          <td class="text-center" width="10%">
                            <div>
                              <button class="delete-btn mr-8" (click)="deleteRow(i,2)" title="delete">
                                <img src="assets/images/delete-icon.png" />
                              </button>
                              <button class="plus-btn" (click)="addRow('2')" [disabled]="trancheAppForm.invalid" title="add">
                                <img src="assets/images/plus-icon.png" />
                              </button>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
              </div>
            </form>
       </div>

        </div>
      </form>
      <!--container 3-->
      <form [formGroup]="coAppDetailsForm" *ngIf="disburseToCoApp">
        <div>
          <h4 class="title">Co-Applicant Details</h4>

          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.coAppName}}
            <!-- <sub class="star_red_col">*</sub> -->
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">             
                <mat-form-field>
                  <mat-select [(ngModel)]="coAppName" formControlName="coAppName" multiple (selectionChange)="selectCoApplicant(coAppName)">
                    <mat-option *ngFor="let x of coAppNamesLov" [value]="x.serialNo">{{x.value}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
            </div>
          </div>
          <!-- container coApp1 starts -->
          <form [formGroup]="coApp1Form" *ngIf="coApp1">
            <div>
              <h4 class="title coAppTitle">CoApplicant-1</h4>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp1BeneficiaryName" [(ngModel)]="coApplicant1['beneficiaryName']" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'" [placeholder]="'Applicant Name'"
                  [type]="'text'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
                  <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp1DisbursementAmount" [(ngModel)]="coApplicant1['disbursementAmount']" [isRequired]="'Disbursement Amount is required'" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                    [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                    [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,8)">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-vf-custom-select [values]="paymentLov" [(ngModel)]="coApplicant1['paymentMethod']" [isRequired]="'Mode of Payment is required'" formControlName="paymentMethod" (change)="setCoAppMOP($event,'coApp1')" [isDirty]="isDirty">
                  </app-vf-custom-select>
                </div>
              </div>
              <div class="form-group" *ngIf="showCoApp1BankDetails || showCoApp1CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp1BenAccNo" [(ngModel)]="coApplicant1['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
                  [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
            <div *ngIf="showCoApp1BankDetails">                        
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <ng-autocomplete 
                      class="custom-select-box"
                      [data]="coApp1BankListData"
                      [(ngModel)]="coApplicant1['beneficiaryBank']"
                      [searchKeyword]="coApp1keyword"
                      (selected)='selectBankNameEvent($event,3)'
                      (inputChanged)='onBankNameSearch($event,3)'
                      [itemTemplate]="coApp1NameTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #coApp1NameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
                <sub class="star_red_col">*</sub></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <!-- <app-custom-input id="coApp1BenBranch" [(ngModel)]="coApplicant1['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                    [isDirty]="isDirty" [type]="'alpha'">
                  </app-custom-input> -->
                  <!-- <app-vf-custom-select [values]="bankCoApp1DetailsData" [(ngModel)]="coApplicant1['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp1')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
                  </app-vf-custom-select> -->
                  <select class="form-control" [(ngModel)]="coApplicant1['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp1')">
                    <option value=''>-- select one --</option>
                    <option *ngFor="let item of bankCoApp1DetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                  </select>
                  <div *ngIf="coApp1Form.controls.beneficiaryBranch.invalid && (coApp1Form.controls.beneficiaryBranch.dirty || coApp1Form.controls.beneficiaryBranch.touched)"
                    class="invalid-feedback-disburse">
                    Beneficiary Branch is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp1IFSC" [(ngModel)]="coApplicant1['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                    [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
                  </app-custom-input>
                </div>
              </div>
              <div class="form-group" [hidden]="true">
                <label for="mobile_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{ labels?.mobileNumber }}
                  <!-- <sub class="star_red_col">*</sub> -->
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                      <app-custom-input formControlName="mobilePhone" id="coApp1mobilePhone" [(ngModel)]="coApplicant1['mobilePhone']" [placeholder]="'Mobile Number'" [maxLength]="mobileLength" [isDirty]="isDirty" [type]="'number'"
                      [patternCheck]="labels.validationData?.mobileNumber.pattern">
                    </app-custom-input>
                  </div>
              </div>
            </div>
              <div *ngIf="showCoApp1DDDetails">
                <div class="form-group">
                  <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-vf-custom-select [values]="instrumentTypeLov" [(ngModel)]="coApplicant1['instrumentType']" [isRequired]="'Instrument Type is required'" formControlName="instrumentType" (change)="setIntType($event.target.value,'coApp1')" [isDirty]="isDirty">
                    </app-vf-custom-select>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp1IntDetails">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-custom-input id="coApp1InstrumentNumber" [(ngModel)]="coApplicant1['instrumentNumber']" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                      [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                    </app-custom-input>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp1IntDetails">
                  <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                    <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                      placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="coApplicant1['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                    </app-vf-custom-select>                -->
                    <ng-autocomplete 
                      class="custom-select-box" [data]="coApp1favBODListData" [(ngModel)]="coApplicant1['favouringBankOfDraw']"
                      [searchKeyword]="coApp1Favkeyword" (selected)='selectBankNameEvent($event,12)' (inputChanged)='onBankNameSearch($event,12)'
                      [itemTemplate]="favCoApp1BankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favCoApp1BankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-custom-input id="coApp1FavBankBranch" [(ngModel)]="coApplicant1['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                      [isDirty]="isDirty" [type]="'alpha'">
                    </app-custom-input>                    -->
                    <select class="form-control" [(ngModel)]="coApplicant1['favouringBankBranch']" formControlName="favouringBankBranch">
                      <option value=''>-- select one --</option>
                      <option *ngFor="let item of bankCoApp1FavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                    </select>
                    <div *ngIf="coApp1Form.controls.favouringBankBranch.invalid && (coApp1Form.controls.favouringBankBranch.dirty || coApp1Form.controls.favouringBankBranch.touched)"
                      class="invalid-feedback-disburse">
                      Favouring Bank Branch is required
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="form-group" *ngIf="showCoApp1CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp1LoanNumber" [(ngModel)]="coApplicant1['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                   [isDirty]="isDirty" [type]="'number'">
                  </app-custom-input>
                </div>
              </div> -->
          
              
          <div class="form-group" *ngIf="showCoApp1DDDetails || showCoApp1BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp1AddLine1" [(ngModel)]="coApplicant1['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp1DDDetails || showCoApp1BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp1AddLine2" [(ngModel)]="coApplicant1['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp1DDDetails || showCoApp1BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp1AddLine3" [(ngModel)]="coApplicant1['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>
          
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-4">
                  <input type="checkbox" id="toDeductCharges2" [(ngModel)]="coApplicant1['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges2"
                    [checked]="coApplicant1['deductChargesFlag']" (change)="selectCheckBox(coApplicant1['deductChargesFlag'],8)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <input type="checkbox" id="appInTranches" [(ngModel)]="coApplicant1['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="appInTranches"
                    [checked]="coApplicant1['trancheDisbursementFlag']" (change)="selectTranche(coApplicant1['trancheDisbursementFlag'],8,false)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
                </div>
              </div>
              <div class="row" *ngIf="showCoApp1TrancheTable">
                <form [formGroup]="trancheCoApp1Form">
                  <div class="disbursement-table-section">
                      <table formArrayName="trancheCoApp1Array" class="table disbursement-table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>{{labels?.disbursementType}}</th>
                              <th>{{labels?.disbursementPercent}}</th>
                              <th>{{labels?.disbursementAmount}}</th>
                              <th>{{labels?.disbursementDate}}</th>
                              <th>{{labels?.action}}</th>                   
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let trance of trancheCoApp1Form['controls'].trancheCoApp1Array['controls']; let i=index" [formGroupName]="i">
                              <td width="8%">
                                <div>
                                  Tranche {{i+1}}
                                </div>
                              </td>
                              <td width="15%">
                                <div class="viewable-field">
                                    <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp1List[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                     </app-custom-input>
                                     <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp1List[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                      </app-custom-input>
                                  <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                    <mat-select [(ngModel)]="trancheCoApp1List[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                      <mat-option value=""> Select </mat-option>
                                      <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                              </td>
                              <td width="15%">
                                         <app-custom-input [(ngModel)]="trancheCoApp1List[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                             [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheCoApp1List,'8',i)">
                              </app-custom-input>                        
                              </td>
                              <td width="15%">
                                <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp1List[i].tranche_disbursement_amount"
                                  name="trancheCoApp1List[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                                  [readOnly]="true" />
                              </td>
                              <td width="18%">
                                <div *ngIf="i==0">
                                  <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp1List[i].trancheDisburseDate"
                                   name="trancheCoApp1List[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                            </div>
                              </td>
                              <td class="text-center" width="10%">
                                <div>
                                  <button class="delete-btn mr-8" (click)="deleteRow(i,8)" title="delete">
                                    <img src="assets/images/delete-icon.png" />
                                  </button>
                                  <button class="plus-btn" (click)="addRow('8')" [disabled]="trancheCoApp1Form.invalid" title="add">
                                    <img src="assets/images/plus-icon.png" />
                                  </button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                  </div>
                </form>
           </div>
          
            </div>
          </form>
          <!-- container coApp1 ends -->
       

          <!-- container coApp2 starts -->
          <form [formGroup]="coApp2Form" *ngIf="coApp2">
            <div>
              <h4 class="title coAppTitle">CoApplicant-2</h4>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp2BeneficiaryName" [(ngModel)]="coApplicant2['beneficiaryName']" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'" [placeholder]="'Applicant Name'"
                  [type]="'text'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
                  <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp2DisbursementAmount" [(ngModel)]="coApplicant2['disbursementAmount']" [isRequired]="'Disbursement Amount is required'" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                    [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                    [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,9)">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-vf-custom-select [values]="paymentLov" [(ngModel)]="coApplicant2['paymentMethod']" [isRequired]="'Mode of Payment is required'" formControlName="paymentMethod" (change)="setCoAppMOP($event,'coApp2')" [isDirty]="isDirty">
                  </app-vf-custom-select>
                </div>
              </div>
              <div class="form-group" *ngIf="showCoApp2BankDetails || showCoApp2CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp2BenAccNo" [(ngModel)]="coApplicant2['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
                  [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
            <div *ngIf="showCoApp2BankDetails">                       
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <ng-autocomplete 
                      class="custom-select-box"
                      [data]="coApp2BankListData"
                      [(ngModel)]="coApplicant2['beneficiaryBank']"
                      [searchKeyword]="coApp2keyword"
                      (selected)='selectBankNameEvent($event,4)'
                      (inputChanged)='onBankNameSearch($event,4)'
                      [itemTemplate]="coApp2NameTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #coApp2NameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
                <sub class="star_red_col">*</sub></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <!-- <app-custom-input id="coApp2BenBranch" [(ngModel)]="coApplicant2['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                    [isDirty]="isDirty" [type]="'alpha'">
                  </app-custom-input> -->
                  <!-- <app-vf-custom-select [values]="bankCoApp2DetailsData" [(ngModel)]="coApplicant2['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp2')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
                  </app-vf-custom-select> -->
                  <select class="form-control" [(ngModel)]="coApplicant2['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp2')">
                    <option value=''>-- select one --</option>
                    <option *ngFor="let item of bankCoApp2DetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                  </select>
                  <div *ngIf="coApp2Form.controls.beneficiaryBranch.invalid && (coApp2Form.controls.beneficiaryBranch.dirty || coApp2Form.controls.beneficiaryBranch.touched)"
                    class="invalid-feedback-disburse">
                    Beneficiary Branch is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp2IFSC" [(ngModel)]="coApplicant2['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                    [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
                  </app-custom-input>
                </div>
              </div>
              <div class="form-group" [hidden]="true">
                <label for="mobile_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{ labels?.mobileNumber }}
                  <!-- <sub class="star_red_col">*</sub> -->
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                      <app-custom-input formControlName="mobilePhone" id="coApp2mobilePhone" [(ngModel)]="coApplicant2['mobilePhone']" [placeholder]="'Mobile Number'" [maxLength]="mobileLength" [isDirty]="isDirty" [type]="'number'"
                      [patternCheck]="labels.validationData?.mobileNumber.pattern">
                    </app-custom-input>
                  </div>
              </div>
            </div>
              <div *ngIf="showCoApp2DDDetails">
                <div class="form-group">
                  <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-vf-custom-select [values]="instrumentTypeLov" [(ngModel)]="coApplicant2['instrumentType']" [isRequired]="'Instrument Type is required'" formControlName="instrumentType" (change)="setIntType($event.target.value,'coApp2')" [isDirty]="isDirty">
                    </app-vf-custom-select>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp2IntDetails">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-custom-input [(ngModel)]="coApplicant2['instrumentNumber']" id="coApp2InstrumentNumber" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                      [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                    </app-custom-input>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp2IntDetails">
                  <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                    <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                      placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="coApplicant2['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                    </app-vf-custom-select>                    -->
                    <ng-autocomplete 
                      class="custom-select-box" [data]="coApp2favBODListData" [(ngModel)]="coApplicant2['favouringBankOfDraw']"
                      [searchKeyword]="coApp2Favkeyword" (selected)='selectBankNameEvent($event,13)' (inputChanged)='onBankNameSearch($event,13)'
                      [itemTemplate]="favCoApp2BankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favCoApp2BankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-custom-input id="coApp2FavBankBranch" [(ngModel)]="coApplicant2['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                      [isDirty]="isDirty" [type]="'alpha'">
                    </app-custom-input>                     -->
                    <select class="form-control" [(ngModel)]="coApplicant2['favouringBankBranch']" formControlName="favouringBankBranch">
                      <option value=''>-- select one --</option>
                      <option *ngFor="let item of bankCoApp2FavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                    </select>
                    <div *ngIf="coApp2Form.controls.favouringBankBranch.invalid && (coApp2Form.controls.favouringBankBranch.dirty || coApp2Form.controls.favouringBankBranch.touched)"
                      class="invalid-feedback-disburse">
                      Favouring Bank Branch is required
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="form-group" *ngIf="showCoApp2CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp2LoanNumber" [(ngModel)]="coApplicant2['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                     [isDirty]="isDirty" [type]="'number'">
                  </app-custom-input>
                </div>
              </div> -->
          
              
          <div class="form-group" *ngIf="showCoApp2DDDetails || showCoApp2BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp2AddLine1" [(ngModel)]="coApplicant2['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp2DDDetails || showCoApp2BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp2AddLine2" [(ngModel)]="coApplicant2['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp2DDDetails || showCoApp2BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp2AddLine3" [(ngModel)]="coApplicant2['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>
          
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-4">
                  <input type="checkbox" id="toDeductCharges2" [(ngModel)]="coApplicant2['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges2"
                    [checked]="coApplicant2['deductChargesFlag']" (change)="selectCheckBox(coApplicant2['deductChargesFlag'],9)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <input type="checkbox" id="appInTranches" [(ngModel)]="coApplicant2['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="appInTranches"
                    [checked]="coApplicant2['trancheDisbursementFlag']" (change)="selectTranche(coApplicant2['trancheDisbursementFlag'],9,false)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
                </div>
              </div>
              <div class="row" *ngIf="showCoApp2TrancheTable">
                <form [formGroup]="trancheCoApp2Form">
                  <div class="disbursement-table-section">
                      <table formArrayName="trancheCoApp2Array" class="table disbursement-table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>{{labels?.disbursementType}}</th>
                              <th>{{labels?.disbursementPercent}}</th>
                              <th>{{labels?.disbursementAmount}}</th>
                              <th>{{labels?.disbursementDate}}</th>
                              <th>{{labels?.action}}</th>                   
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let trance of trancheCoApp2Form['controls'].trancheCoApp2Array['controls']; let i=index" [formGroupName]="i">
                              <td width="8%">
                                <div>
                                  Tranche {{i+1}}
                                </div>
                              </td>
                              <td width="15%">
                                <div class="viewable-field">
                                    <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp2List[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                     </app-custom-input>
                                     <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp2List[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                      </app-custom-input>
                                  <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                    <mat-select [(ngModel)]="trancheCoApp2List[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                      <mat-option value=""> Select </mat-option>
                                      <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                              </td>
                              <td width="15%">
                                         <app-custom-input [(ngModel)]="trancheCoApp2List[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                             [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheCoApp2List,'9',i)">
                              </app-custom-input>                        
                              </td>
                              <td width="15%">
                                <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp2List[i].tranche_disbursement_amount"
                                  name="trancheCoApp2List[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                                  [readOnly]="true" />
                              </td>
                              <td width="18%">
                                <div *ngIf="i==0">
                                  <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp2List[i].trancheDisburseDate"
                                   name="trancheCoApp2List[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                            </div>
                              </td>
                              <td class="text-center" width="10%">
                                <div>
                                  <button class="delete-btn mr-8" (click)="deleteRow(i,9)" title="delete">
                                    <img src="assets/images/delete-icon.png" />
                                  </button>
                                  <button class="plus-btn" (click)="addRow('9')" [disabled]="trancheCoApp2Form.invalid" title="add">
                                    <img src="assets/images/plus-icon.png" />
                                  </button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                  </div>
                </form>
           </div>
          
            </div>
          </form>
          <!-- container coApp2 ends -->

          <!-- container coApp3 starts -->
          <form [formGroup]="coApp3Form" *ngIf="coApp3">
            <div>
              <h4 class="title coAppTitle">CoApplicant-3</h4>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp3BeneficiaryName" [(ngModel)]="coApplicant3['beneficiaryName']" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'" [placeholder]="'Applicant Name'"
                  [type]="'text'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
                  <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp3DisbursementAmount" [(ngModel)]="coApplicant3['disbursementAmount']" [isRequired]="'Disbursement Amount is required'" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                    [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                    [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,10)">
                  </app-custom-input>
                </div>
              </div>
            <div class="form-group">
                <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-vf-custom-select [values]="paymentLov" [(ngModel)]="coApplicant3['paymentMethod']" [isRequired]="'Mode of Payment is required'" formControlName="paymentMethod" (change)="setCoAppMOP($event,'coApp3')" [isDirty]="isDirty">
                  </app-vf-custom-select>
                </div>
              </div>
              <div class="form-group" *ngIf="showCoApp3BankDetails || showCoApp3CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp3BenAccNo" [(ngModel)]="coApplicant3['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
                  [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
                  </app-custom-input>
                </div>
              </div>
          
            <div *ngIf="showCoApp3BankDetails">              
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <ng-autocomplete 
                      class="custom-select-box"
                      [data]="coApp3BankListData"
                      [(ngModel)]="coApplicant3['beneficiaryBank']"
                      [searchKeyword]="coApp3keyword"
                      (selected)='selectBankNameEvent($event,5)'
                      (inputChanged)='onBankNameSearch($event,5)'
                      [itemTemplate]="coApp3NameTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #coApp3NameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
                <sub class="star_red_col">*</sub></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <!-- <app-custom-input id="coApp3BenBranch" [(ngModel)]="coApplicant3['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                    [isDirty]="isDirty" [type]="'alpha'">
                  </app-custom-input> -->
                  <!-- <app-vf-custom-select [values]="bankCoApp3DetailsData" [(ngModel)]="coApplicant3['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp3')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
                  </app-vf-custom-select> -->
                  <select class="form-control" [(ngModel)]="coApplicant3['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'coApp3')">
                    <option value=''>-- select one --</option>
                    <option *ngFor="let item of bankCoApp3DetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                  </select>
                  <div *ngIf="coApp3Form.controls.beneficiaryBranch.invalid && (coApp3Form.controls.beneficiaryBranch.dirty || coApp3Form.controls.beneficiaryBranch.touched)"
                    class="invalid-feedback-disburse">
                    Beneficiary Branch is required
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp3IFSC" [(ngModel)]="coApplicant3['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                    [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
                  </app-custom-input>
                </div>
              </div>
              <div class="form-group" [hidden]="true">
                <label for="mobile_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{ labels?.mobileNumber }}
                  <!-- <sub class="star_red_col">*</sub> -->
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                      <app-custom-input formControlName="mobilePhone" id="coApp3mobilePhone" [(ngModel)]="coApplicant3['mobilePhone']" [placeholder]="'Mobile Number'" [maxLength]="mobileLength" [isDirty]="isDirty" [type]="'number'"
                      [patternCheck]="labels.validationData?.mobileNumber.pattern">
                    </app-custom-input>
                  </div>
              </div>
            </div>
              <div *ngIf="showCoApp3DDDetails">
                <div class="form-group">
                  <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-vf-custom-select [values]="instrumentTypeLov" [(ngModel)]="coApplicant3['instrumentType']" [isRequired]="'Instrument Type is required'" formControlName="instrumentType" (change)="setIntType($event.target.value,'coApp3')" [isDirty]="isDirty">
                    </app-vf-custom-select>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp3IntDetails">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <app-custom-input [(ngModel)]="coApplicant3['instrumentNumber']" id="coApp3InstrumentNumber" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                      [isDirty]="isDirty" [type]="'number'">
                    </app-custom-input>
                  </div>
                </div>
                <div class="form-group" *ngIf="showcoApp3IntDetails">
                  <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                    <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                      placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="coApplicant3['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                    </app-vf-custom-select>                  -->
                    <ng-autocomplete 
                      class="custom-select-box" [data]="coApp3favBODListData" [(ngModel)]="coApplicant3['favouringBankOfDraw']"
                      [searchKeyword]="coApp3Favkeyword" (selected)='selectBankNameEvent($event,14)' (inputChanged)='onBankNameSearch($event,14)'
                      [itemTemplate]="favCoApp3BankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favCoApp3BankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
                  </div>
                </div>
                <div class="form-group">
                  <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
                  <sub class="star_red_col">*</sub>
                  </label>
                  <div class="col-sm-6 col-md-4 col-lg-3">
                    <!-- <app-custom-input id="coApp3FavBankBranch" [(ngModel)]="coApplicant3['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                      [isDirty]="isDirty" [type]="'alpha'">
                    </app-custom-input> -->
                    <select class="form-control" [(ngModel)]="coApplicant3['favouringBankBranch']" formControlName="favouringBankBranch">
                      <option value=''>-- select one --</option>
                      <option *ngFor="let item of bankCoApp3FavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                    </select>
                    <div *ngIf="coApp3Form.controls.favouringBankBranch.invalid && (coApp3Form.controls.favouringBankBranch.dirty || coApp3Form.controls.favouringBankBranch.touched)"
                      class="invalid-feedback-disburse">
                      Favouring Bank Branch is required
                    </div>
                  </div>
                </div>
              </div>
              <!-- <div class="form-group" *ngIf="showCoApp3CASADetails">
                <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
                <sub class="star_red_col">*</sub>
                </label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <app-custom-input id="coApp3LoanNumber" [(ngModel)]="coApplicant3['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                     [isDirty]="isDirty" [type]="'number'">
                  </app-custom-input>
                </div>
              </div> -->
          
              
          <div class="form-group" *ngIf="showCoApp3DDDetails || showCoApp3BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp3AddLine1" [(ngModel)]="coApplicant3['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp3DDDetails || showCoApp3BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp3AddLine2" [(ngModel)]="coApplicant3['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showCoApp3DDDetails || showCoApp3BankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="coApp3AddLine3" [(ngModel)]="coApplicant3['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>
          
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-4">
                  <input type="checkbox" id="toDeductCharges2" [(ngModel)]="coApplicant3['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges2"
                    [checked]="coApplicant3['deductChargesFlag']" (change)="selectCheckBox(coApplicant3['deductChargesFlag'],10)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
                </div>
              </div>
              <div class="form-group">
                <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
                <div class="col-sm-6 col-md-4 col-lg-3">
                  <input type="checkbox" id="appInTranches" [(ngModel)]="coApplicant3['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="appInTranches"
                    [checked]="coApplicant3['trancheDisbursementFlag']" (change)="selectTranche(coApplicant3['trancheDisbursementFlag'],10,false)">
                  <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
                </div>
              </div>
              <div class="row" *ngIf="showCoApp3TrancheTable">
                <form [formGroup]="trancheCoApp3Form">
                  <div class="disbursement-table-section">
                      <table formArrayName="trancheCoApp3Array" class="table disbursement-table">
                          <thead>
                            <tr>
                              <th>#</th>
                              <th>{{labels?.disbursementType}}</th>
                              <th>{{labels?.disbursementPercent}}</th>
                              <th>{{labels?.disbursementAmount}}</th>
                              <th>{{labels?.disbursementDate}}</th>
                              <th>{{labels?.action}}</th>                   
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let trance of trancheCoApp3Form['controls'].trancheCoApp3Array['controls']; let i=index" [formGroupName]="i">
                              <td width="8%">
                                <div>
                                  Tranche {{i+1}}
                                </div>
                              </td>
                              <td width="15%">
                                <div class="viewable-field">
                                    <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp3List[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                     </app-custom-input>
                                     <app-custom-input [hidden]="true" [(ngModel)]="trancheCoApp3List[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                      </app-custom-input>
                                  <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                    <mat-select [(ngModel)]="trancheCoApp3List[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                      <mat-option value=""> Select </mat-option>
                                      <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </div>
                              </td>
                              <td width="15%">
                                         <app-custom-input [(ngModel)]="trancheCoApp3List[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                             [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheCoApp3List,'10',i)">
                              </app-custom-input>                        
                              </td>
                              <td width="15%">
                                <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp3List[i].tranche_disbursement_amount"
                                  name="trancheCoApp3List[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                                  [readOnly]="true" />
                              </td>
                              <td width="18%">
                                <div *ngIf="i==0">
                                  <input type="text"  class="form-control text-field" [(ngModel)]="trancheCoApp3List[i].trancheDisburseDate"
                                   name="trancheCoApp3List[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                            </div>
                              </td>
                              <td class="text-center" width="10%">
                                <div>
                                  <button class="delete-btn mr-8" (click)="deleteRow(i,10)" title="delete">
                                    <img src="assets/images/delete-icon.png" />
                                  </button>
                                  <button class="plus-btn" (click)="addRow('10')" [disabled]="trancheCoApp3Form.invalid" title="add">
                                    <img src="assets/images/plus-icon.png" />
                                  </button>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                  </div>
                </form>
           </div>
          
            </div>
          </form>
          <!-- container coApp3 ends -->
        </div>
      </form>
      <!--container 4-->
      <form [formGroup]="bankerDetailsForm" *ngIf="disburseToBanker">
        <div>
          <h4 class="title">Banker Details</h4>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.selectBanker}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="bankerObjInfo['bankerId']" [isRequired]="'Select Banker is required'" formControlName="bankerId"  [isDirty]="isDirty">
              </app-vf-custom-select> -->
              <ng-autocomplete 
                  class="custom-select-box"
                  [data]="selectBankerListData"
                  [(ngModel)]="bankerObjInfo['bankerId']"
                  [searchKeyword]="dealerkeyword"
                  (inputChanged)='onBankNameSearch($event,9)'
                  [itemTemplate]="bankerTemplate"
                  [notFoundTemplate]="notFoundTemplate"
                  formControlName="bankerId"
                  [placeHolder]="'Select Banker'"
                  [minQueryLength]="3">                                 
                </ng-autocomplete>               
                <ng-template #bankerTemplate let-item>
                <a [innerHTML]="item"></a>
                </ng-template>               
                <ng-template #notFoundTemplate let-notFound>
                <div [innerHTML]="notFound"></div>
                </ng-template>
            </div>
          </div>

          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input id="bankerAppName" [(ngModel)]="bankerObjInfo['beneficiaryName']" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'"
                [placeholder]="'Applicant Name'" [isDirty]="isDirty" [type]="'text'">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerDisbursementAmount" [isRequired]="'Disbursement Amount is required'" [(ngModel)]="bankerObjInfo['disbursementAmount']" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,4)">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [(ngModel)]="bankerObjInfo['paymentMethod']" [isRequired]="'Mode Of Payment is required'" [values]="paymentLov" formControlName="paymentMethod" (change)="setModeOfPayment($event,'banker')" [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>
          <div class="form-group" *ngIf="showBankerBankDetails || showBankerCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerBenAccNo" [(ngModel)]="bankerObjInfo['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
              [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>
          <div *ngIf="showBankerBankDetails">         
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <ng-autocomplete 
                      class="custom-select-box"
                      [data]="bankerBankListData"
                      [(ngModel)]="bankerObjInfo['beneficiaryBank']"
                      [searchKeyword]="bankerkeyword"
                      (selected)='selectBankNameEvent($event,6)'
                      (inputChanged)='onBankNameSearch($event,6)'
                      [itemTemplate]="bankerTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #bankerTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <!-- <app-custom-input id="bankerBenBranch" [(ngModel)]="bankerObjInfo['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                [isDirty]="isDirty" [type]="'alpha'">
              </app-custom-input> -->
              <!-- <app-vf-custom-select [values]="bankBankerDetailsData" [(ngModel)]="bankerObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'banker')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
              </app-vf-custom-select> -->
              <select class="form-control" [(ngModel)]="bankerObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'banker')">
                <option value=''>-- select one --</option>
                <option *ngFor="let item of bankBankerDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
              </select>
              <div *ngIf="bankerDetailsForm.controls.beneficiaryBranch.invalid && (bankerDetailsForm.controls.beneficiaryBranch.dirty || bankerDetailsForm.controls.beneficiaryBranch.touched)"
                  class="invalid-feedback-disburse">
                  Beneficiary Branch is required
                </div>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerIFSC" [(ngModel)]="bankerObjInfo['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
              </app-custom-input>
            </div>
          </div>
        </div>
          <div *ngIf="showBankerDDDetails">
            <div class="form-group">
              <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-vf-custom-select [values]="instrumentTypeLov" [isRequired]="'Instrument Type is required'" [(ngModel)]="bankerObjInfo['instrumentType']" formControlName="instrumentType" (change)="setIntType($event.target.value,'banker')" [isDirty]="isDirty">
                </app-vf-custom-select>
              </div>
            </div>
            <div class="form-group" *ngIf="showBankerIntDetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input [(ngModel)]="bankerObjInfo['instrumentNumber']" id="bankerInstrumentNumber" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                  [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" *ngIf="showBankerIntDetails">
              <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                  placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="bankerObjInfo['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                </app-vf-custom-select>               -->
                <ng-autocomplete 
                      class="custom-select-box" [data]="bankerfavBODListData" [(ngModel)]="bankerObjInfo['favouringBankOfDraw']"
                      [searchKeyword]="bankerFavkeyword" (selected)='selectBankNameEvent($event,15)' (inputChanged)='onBankNameSearch($event,15)'
                      [itemTemplate]="favBankerBankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favBankerBankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="bankerFavBankBranch" [(ngModel)]="bankerObjInfo['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input>               -->
                <select class="form-control" [(ngModel)]="bankerObjInfo['favouringBankBranch']" formControlName="favouringBankBranch">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankBankerFavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="bankerDetailsForm.controls.favouringBankBranch.invalid && (bankerDetailsForm.controls.favouringBankBranch.dirty || bankerDetailsForm.controls.favouringBankBranch.touched)"
                  class="invalid-feedback-disburse">
                  Favouring Bank Branch is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group" *ngIf="showBankerCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerLoanNumber" [(ngModel)]="bankerObjInfo['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                 [isDirty]="isDirty" [type]="'number'">
              </app-custom-input>
            </div>
          </div> -->
         
          <div class="form-group" *ngIf="showBankerDDDetails || showBankerBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerAddLine1" [(ngModel)]="bankerObjInfo['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showBankerDDDetails || showBankerBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerAddLine2" [(ngModel)]="bankerObjInfo['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showBankerDDDetails || showBankerBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="bankerAddLine3" [(ngModel)]="bankerObjInfo['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="toDeductCharges4" [(ngModel)]="bankerObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges4"
                [checked]="bankerObjInfo['deductChargesFlag']" (change)="selectCheckBox(bankerObjInfo['deductChargesFlag'],4)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>
          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input type="checkbox" id="bankerTranches" [(ngModel)]="bankerObjInfo['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="bankerTranches"
                [checked]="bankerObjInfo['trancheDisbursementFlag']" (change)="selectTranche(bankerObjInfo['trancheDisbursementFlag'],4,false)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
            </div>
          </div>
          <div class="row" *ngIf="showBankerTrancheTable">
            <form [formGroup]="trancheBankerForm">
              <div class="disbursement-table-section">
                  <table formArrayName="trancheBankerArray" class="table disbursement-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>{{labels?.disbursementType}}</th>
                          <th>{{labels?.disbursementPercent}}</th>
                          <th>{{labels?.disbursementAmount}}</th>
                          <th>{{labels?.disbursementDate}}</th>
                          <th>{{labels?.action}}</th>                   
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trance of trancheBankerForm['controls'].trancheBankerArray['controls']; let i=index" [formGroupName]="i">
                          <td width="8%">
                            <div>
                              Tranche {{i+1}}
                            </div>
                          </td>
                          <td width="15%">
                            <div class="viewable-field">
                                <app-custom-input [hidden]="true" [(ngModel)]="trancheBankerList[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                  </app-custom-input>
                                  <app-custom-input [hidden]="true" [(ngModel)]="trancheBankerList[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                    </app-custom-input>
                              <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                <mat-select [(ngModel)]="trancheBankerList[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                  <mat-option value=""> Select </mat-option>
                                  <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </td>
                          <td width="15%">
                            <!-- <input type="text"  class="form-control text-field" [(ngModel)]="trancheBankerList[i].disbursement_percentage"
                               name="trancheBankerList[i].disbursement_percentage" formControlName="disbursement_percentage" />  -->
                               <app-custom-input [(ngModel)]="trancheBankerList[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                               [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheBankerList,'4',i)">
                                </app-custom-input>                       
                          </td>
                          <td width="15%">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheBankerList[i].tranche_disbursement_amount"
                              name="trancheBankerList[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                              [readOnly]="true" />
                          </td>
                          <td width="18%">
                            <div *ngIf="i==0">
                              <input type="text"  class="form-control text-field" [(ngModel)]="trancheBankerList[i].trancheDisburseDate"
                                name="trancheBankerList[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                         <!-- <kendo-datepicker class="form-control mandatory" formControlName="trancheDisburseDate" [(ngModel)]="trancheBankerList[i].trancheDisburseDate" [format]="'dd/MM/yyyy'" 
                           placeholder="tranche Date" [activeView]="'decade'"></kendo-datepicker> -->
                           </div>
                          </td>
                          <td class="text-center" width="10%">
                            <div>
                              <button class="delete-btn mr-8" (click)="deleteRow(i,4)" title="delete">
                                <img src="assets/images/delete-icon.png" />
                              </button>
                              <button class="plus-btn" (click)="addRow('4')" [disabled]="trancheBankerForm.invalid" title="add" >
                                <img src="assets/images/plus-icon.png" />
                              </button>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
              </div>
            </form>
       </div>
        </div>
      </form>
      <!--container 5-->
      <form [formGroup]="financierDetailsForm" *ngIf="disburseToFinancier">
        <div>
          <h4 class="title">Financier Details</h4>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.selectFinancier}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [values]="financierLov" [isRequired]="'Select Financier is required'" [(ngModel)]="financierObjInfo['financierId']" formControlName="financierId"  [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>

          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.appName}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input id="finBeneficiaryName" [(ngModel)]="financierObjInfo['beneficiaryName']" [isRequired]="'Applicant Name is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'"
                [placeholder]="'Applicant Name'" [isDirty]="isDirty" [type]="'text'">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="financierDisbursementAmount" [isRequired]="'Disbursement Amount is required'" [(ngModel)]="financierObjInfo['disbursementAmount']" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,5)">
              </app-custom-input>
            </div>
          </div>
          <div class="form-group">
            <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [(ngModel)]="financierObjInfo['paymentMethod']" [isRequired]="'Mode Of Payment is required'" [values]="paymentLov" formControlName="paymentMethod" (change)="setModeOfPayment($event,'financier')"
                [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>
          <div class="form-group" *ngIf="showFinBankDetails || showFinCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finBenAccNo" [(ngModel)]="financierObjInfo['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
              [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>

          <div *ngIf="showFinBankDetails">         
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <ng-autocomplete 
                      class="custom-select-box"
                      [data]="finBankListData"
                      [(ngModel)]="financierObjInfo['beneficiaryBank']"
                      [searchKeyword]="finkeyword"
                      (selected)='selectBankNameEvent($event,7)'
                      (inputChanged)='onBankNameSearch($event,7)'
                      [itemTemplate]="financierTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #financierTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <!-- <app-custom-input id="finBenBranch" [(ngModel)]="financierObjInfo['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                [isDirty]="isDirty" [type]="'alpha'">
              </app-custom-input> -->
              <!-- <app-vf-custom-select [values]="bankFinDetailsData" [(ngModel)]="financierObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'financier')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
              </app-vf-custom-select> -->
              <select class="form-control" [(ngModel)]="financierObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'financier')">
                <option value=''>-- select one --</option>
                <option *ngFor="let item of bankFinDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
              </select>
              <div *ngIf="financierDetailsForm.controls.beneficiaryBranch.invalid && (financierDetailsForm.controls.beneficiaryBranch.dirty || financierDetailsForm.controls.beneficiaryBranch.touched)"
                  class="invalid-feedback-disburse">
                  Beneficiary Branch is required
                </div>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finIFSC" [(ngModel)]="financierObjInfo['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
              </app-custom-input>
            </div>
          </div>
        </div>
          <div *ngIf="showFinDDDetails">
            <div class="form-group">
              <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-vf-custom-select [values]="instrumentTypeLov" [isRequired]="'Instrument Type is required'" [(ngModel)]="financierObjInfo['instrumentType']" formControlName="instrumentType" (change)="setIntType($event.target.value,'financier')" [isDirty]="isDirty">
                </app-vf-custom-select>
              </div>
            </div>
            <div class="form-group" *ngIf="showFinIntDetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input [(ngModel)]="financierObjInfo['instrumentNumber']" id="finInstrumentNumber" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                  [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" *ngIf="showFinIntDetails">
              <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                  placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="financierObjInfo['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                </app-vf-custom-select>                -->
                <ng-autocomplete 
                      class="custom-select-box" [data]="finfavBODListData" [(ngModel)]="financierObjInfo['favouringBankOfDraw']"
                      [searchKeyword]="finFavkeyword" (selected)='selectBankNameEvent($event,16)' (inputChanged)='onBankNameSearch($event,16)'
                      [itemTemplate]="favFinBankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favFinBankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="finFavBankBranch" [(ngModel)]="financierObjInfo['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input>                 -->
                <select class="form-control" [(ngModel)]="financierObjInfo['favouringBankBranch']" formControlName="favouringBankBranch">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankFinFavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="financierDetailsForm.controls.favouringBankBranch.invalid && (financierDetailsForm.controls.favouringBankBranch.dirty || financierDetailsForm.controls.favouringBankBranch.touched)"
                  class="invalid-feedback-disburse">
                  Favouring Bank Branch is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group" *ngIf="showFinCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finLoanNumber" [(ngModel)]="financierObjInfo['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                 [isDirty]="isDirty" [type]="'number'">
              </app-custom-input>
            </div>
          </div> -->
          
          <div class="form-group" *ngIf="showFinDDDetails || showFinBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finAddLine1" [(ngModel)]="financierObjInfo['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showFinDDDetails || showFinBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finAddLine2" [(ngModel)]="financierObjInfo['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showFinDDDetails || showFinBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="finAddLine3" [(ngModel)]="financierObjInfo['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="toDeductCharges5" [(ngModel)]="financierObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges5"
                [checked]="financierObjInfo['deductChargesFlag']" (change)="selectCheckBox(financierObjInfo['deductChargesFlag'],5)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input type="checkbox" id="financierTranches" [(ngModel)]="financierObjInfo['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="financierTranches"
                [checked]="financierObjInfo['trancheDisbursementFlag']" (change)="selectTranche(financierObjInfo['trancheDisbursementFlag'],5,false)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
            </div>
          </div>

          <div class="row" *ngIf="showFinancierTrancheTable">
            <form [formGroup]="trancheFinancierForm">
              <div class="disbursement-table-section">
                  <table formArrayName="trancheFinancierArray" class="table disbursement-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>{{labels?.disbursementType}}</th>
                          <th>{{labels?.disbursementPercent}}</th>
                          <th>{{labels?.disbursementAmount}}</th>
                          <th>{{labels?.disbursementDate}}</th>
                          <th>{{labels?.action}}</th>                   
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trance of trancheFinancierForm['controls'].trancheFinancierArray['controls']; let i=index" [formGroupName]="i">
                          <td width="8%">
                            <div>
                              Tranche {{i+1}}
                            </div>
                          </td>
                          <td width="15%">
                            <div class="viewable-field">
                                <app-custom-input [hidden]="true" [(ngModel)]="trancheFinancierList[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                  </app-custom-input>
                                  <app-custom-input [hidden]="true" [(ngModel)]="trancheFinancierList[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                    </app-custom-input>
                              <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                <mat-select [(ngModel)]="trancheFinancierList[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                  <mat-option value=""> Select </mat-option>
                                  <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </td>
                          <td width="15%">
                            <!-- <input type="text"  class="form-control text-field" [(ngModel)]="trancheFinancierList[i].disbursement_percentage"
                               name="trancheFinancierList[i].disbursement_percentage" formControlName="disbursement_percentage" />      -->
                               <app-custom-input [(ngModel)]="trancheFinancierList[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                               [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheFinancierList,'5',i)">
                                </app-custom-input>                     
                          </td>
                          <td width="15%">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheFinancierList[i].tranche_disbursement_amount"
                              name="trancheFinancierList[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                              [readOnly]="true" />
                          </td>
                          <td width="18%">
                            <div *ngIf="i==0">
                              <input type="text"  class="form-control text-field" [(ngModel)]="trancheFinancierList[i].trancheDisburseDate"
                                name="trancheFinancierList[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                         <!-- <kendo-datepicker class="form-control mandatory" formControlName="trancheDisburseDate" [(ngModel)]="trancheFinancierList[i].trancheDisburseDate" [format]="'dd/MM/yyyy'" 
                           placeholder="tranche Date" [activeView]="'decade'"></kendo-datepicker> -->
                           </div>
                          </td>
                          <td class="text-center" width="10%">
                            <div>
                              <button class="delete-btn mr-8" (click)="deleteRow(i,5)" title="delete">
                                <img src="assets/images/delete-icon.png" />
                              </button>
                              <button class="plus-btn" (click)="addRow('5')" [disabled]="trancheFinancierForm.invalid" title="add" >
                                <img src="assets/images/plus-icon.png" />
                              </button>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
              </div>
            </form>
       </div>

        </div>
      </form>
      <!--container 6-->
      <form [formGroup]="thirdPartyDetailsForm" *ngIf="disburseToThirdParty">
        <div>
          <h4 class="title">Third Party</h4>

          <!-- <div class="form-group">
          <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">Beneficiary Name</label>
          <div class="col-sm-6 col-md-4 col-lg-3">
              <input
              formControlName="beneficiaryName"
              type="text"
              class="form-control mandatory"
              id="beneficiary"
              placeholder="beneficiary Name"
              name="beneficiary"
              disabled
            />
          </div>
        </div> -->
        <div class="form-group">
          <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.tpName}}
          <sub class="star_red_col">*</sub>
          </label>
          <div class="col-sm-6 col-md-4 col-lg-3">
            <app-custom-input id="tpBeneficiaryName" [(ngModel)]="thirdPartyObjInfo['beneficiaryName']" [isRequired]="'Third Party is required'" formControlName="beneficiaryName" [maxLength]="labels?.validationData?.fullName?.maxLength" [type]="'alpha'" [className]="'form-control mandatory'" [placeholder]="'Beneficiary Name'"
              [isDirty]="isDirty" [type]="'text'">
            </app-custom-input>
          </div>
        </div>
        <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disbursementAmount}}
              <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id= "thirdPartyDisbursementAmount" [isRequired]="'Disbursement Amount is required'" [(ngModel)]="thirdPartyObjInfo['disbursementAmount']" formControlName="disbursementAmount" [className]="'form-control mandatory'"
                [placeholder]="'Disbursement Amount'" [maxLength]="amountLength" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'" (keyup)="getCumulativeDisbAmnt($event,6)">
              </app-custom-input>
            </div>
          </div>
        <div class="form-group">
            <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.modeOfPayment}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-vf-custom-select [(ngModel)]="thirdPartyObjInfo['paymentMethod']" [isRequired]="'Mode Of Payment is required'" [values]="paymentLov" formControlName="paymentMethod" (change)="setModeOfPayment($event,'thirdParty')"
                [isDirty]="isDirty">
              </app-vf-custom-select>
            </div>
          </div>
          <div class="form-group" *ngIf="showTPBankDetails || showTPCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfAccount}}
            <sub class="star_red_col">*</sub></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpBenAccNo" [(ngModel)]="thirdPartyObjInfo['beneficiaryAccountNo']" [isRequired]="'Beneficiary Account is required'" formControlName="beneficiaryAccountNo" [className]="'form-control mandatory'" [placeholder]="'Account Number'"
              [maxLength]="labels?.validationData?.accountNumber?.maxLength" [type]="'alpha-numeric-nospace'" [isDirty]="isDirty">
              </app-custom-input>
            </div>
          </div>
        <div *ngIf="showTPBankDetails">         
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBank}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <ng-autocomplete 
                      class="custom-select-box"
                      [data]="thirdPartyBankListData"
                      [(ngModel)]="thirdPartyObjInfo['beneficiaryBank']"
                      [searchKeyword]="thirdPartykeyword"
                      (selected)='selectBankNameEvent($event,8)'
                      (inputChanged)='onBankNameSearch($event,8)'
                      [itemTemplate]="thirdPartyTemplate"
                      [notFoundTemplate]="notFoundTemplate"
                      formControlName="beneficiaryBank"
                      [placeHolder]="'Beneficiary Bank'"
                      [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #thirdPartyTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.bnfBranch}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <!-- <app-custom-input id="tpBenBranch" [(ngModel)]="thirdPartyObjInfo['beneficiaryBranch']" [isRequired]="'Beneficiary Branch is required'" formControlName="beneficiaryBranch" [className]="'form-control mandatory'" [placeholder]="'Branch'" [maxLength]="bnfBranchLength"
                [isDirty]="isDirty" [type]="'alpha'">
              </app-custom-input> -->
              <!-- <app-vf-custom-select [values]="bankTPDetailsData" [(ngModel)]="thirdPartyObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'thirdParty')" [isRequired]="'Beneficiary Branch is required'" [isDirty]="isDirty">
              </app-vf-custom-select> -->
              <select class="form-control" [(ngModel)]="thirdPartyObjInfo['beneficiaryBranch']" formControlName="beneficiaryBranch" (change)="setIFSC($event.target.value,'thirdParty')">
                <option value=''>-- select one --</option>
                <option *ngFor="let item of bankTPDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
              </select>
              <div *ngIf="thirdPartyDetailsForm.controls.beneficiaryBranch.invalid && (thirdPartyDetailsForm.controls.beneficiaryBranch.dirty || thirdPartyDetailsForm.controls.beneficiaryBranch.touched)"
                  class="invalid-feedback-disburse">
                  Beneficiary Branch is required
                </div>
            </div>
          </div>
          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.ifscCode}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpIFSC" [(ngModel)]="thirdPartyObjInfo['ifscCode']" [isRequired]="'IFSC Code is required'" formControlName="ifscCode" [className]="'form-control mandatory'" [placeholder]="'IFSC Code'" [maxLength]="ifscLength"
                [isDirty]="isDirty" [type]="'alpha-numeric-nospace'">
              </app-custom-input>
            </div>
          </div>
        </div>
          <div *ngIf="showTPDDDetails">
            <div class="form-group">
              <label for="business_division" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instType}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-vf-custom-select [values]="instrumentTypeLov" [isRequired]="'Instrument Type is required'" [(ngModel)]="thirdPartyObjInfo['instrumentType']" formControlName="instrumentType" (change)="setIntType($event.target.value,'thirdParty')" [isDirty]="isDirty">
                </app-vf-custom-select>
              </div>
            </div>
            <div class="form-group" *ngIf="showTpIntDetails">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instNumber}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <app-custom-input [(ngModel)]="thirdPartyObjInfo['instrumentNumber']" id="tpInstrumentNumber" [isRequired]="'Instrument Number is required'" formControlName="instrumentNumber" [className]="'form-control mandatory'" [placeholder]="'Instrument Number'"
                  [isDirty]="isDirty" [maxLength]="labels?.validationData?.instrumentNumber?.maxLength" [type]="'number'">
                </app-custom-input>
              </div>
            </div>
            <div class="form-group" *ngIf="showTpIntDetails">
              <label for="tdd" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.instDate}}
                <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <kendo-datepicker class="form-control mandatory" formControlName="instrumentDate" [format]="'dd/MM/yyyy'" 
                  placeholder="Instrument Date" [min]="todayDateNew" [activeView]="'decade'"></kendo-datepicker>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankOfDrawee}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-vf-custom-select [values]="bankerLov" [(ngModel)]="thirdPartyObjInfo['favouringBankOfDraw']" formControlName="favouringBankOfDraw" [isRequired]="'Favouring Bank of Drawee is required'" [isDirty]="isDirty">
                </app-vf-custom-select>            -->
                <ng-autocomplete 
                      class="custom-select-box" [data]="thirdPartyfavBODListData" [(ngModel)]="thirdPartyObjInfo['favouringBankOfDraw']"
                      [searchKeyword]="thirdPartyFavkeyword" (selected)='selectBankNameEvent($event,17)' (inputChanged)='onBankNameSearch($event,17)'
                      [itemTemplate]="favTPBankNameTemplate" [notFoundTemplate]="notFoundTemplate" formControlName="favouringBankOfDraw"
                      [placeHolder]="'Favouring Bank of Drawee'" [minQueryLength]="3">                                 
                    </ng-autocomplete>               
                    <ng-template #favTPBankNameTemplate let-item>
                    <a [innerHTML]="item"></a>
                    </ng-template>               
                    <ng-template #notFoundTemplate let-notFound>
                    <div [innerHTML]="notFound"></div>
                    </ng-template>
              </div>
            </div>
            <div class="form-group">
              <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.favourBankBranch}}
              <sub class="star_red_col">*</sub>
              </label>
              <div class="col-sm-6 col-md-4 col-lg-3">
                <!-- <app-custom-input id="tpFavBankBranch" [(ngModel)]="thirdPartyObjInfo['favouringBankBranch']" [isRequired]="'Favouring Bank Branch is required'" formControlName="favouringBankBranch" [className]="'form-control mandatory'" [placeholder]="'Favouring Bank Branch'"
                  [isDirty]="isDirty" [type]="'alpha'">
                </app-custom-input>                 -->
                <select class="form-control" [(ngModel)]="thirdPartyObjInfo['favouringBankBranch']" formControlName="favouringBankBranch">
                  <option value=''>-- select one --</option>
                  <option *ngFor="let item of bankTPFavBODDetailsData" [value]="item.externalBankCode">{{item.externalBankBranch}}</option>
                </select>
                <div *ngIf="thirdPartyDetailsForm.controls.favouringBankBranch.invalid && (thirdPartyDetailsForm.controls.favouringBankBranch.dirty || thirdPartyDetailsForm.controls.favouringBankBranch.touched)"
                  class="invalid-feedback-disburse">
                  Favouring Bank Branch is required
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="form-group" *ngIf="showTPCASADetails">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.disburseLoanNumber}}
            <sub class="star_red_col">*</sub>
            </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpLoanNumber" [(ngModel)]="thirdPartyObjInfo['loanNumber']" [minLength]="labels?.validationData?.loanNumber?.minLength" [maxLength]="labels?.validationData?.loanNumber?.maxLength" [isRequired]="'Loan Number is required'" formControlName="loanNumber" [className]="'form-control mandatory'" [placeholder]="'loan Number'"
                 [isDirty]="isDirty" [type]="'number'">
              </app-custom-input>
            </div>
          </div> -->
          
          <div class="form-group" *ngIf="showTPDDDetails || showTPBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline1}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpAddLine1" [(ngModel)]="thirdPartyObjInfo['beneficiaryAddress1']"  formControlName="beneficiaryAddress1" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 1'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showTPDDDetails || showTPBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline2}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpAddLine2" [(ngModel)]="thirdPartyObjInfo['beneficiaryAddress2']"  formControlName="beneficiaryAddress2" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 2'"></app-custom-input>
            </div>
          </div>
          <div class="form-group" *ngIf="showTPDDDetails || showTPBankDetails">
            <label for="lead_date" class="control-label col-sm-5 col-md-4 col-lg-3">{{labels?.addressline3}}</label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input id="tpAddLine3" [(ngModel)]="thirdPartyObjInfo['beneficiaryAddress3']"  formControlName="beneficiaryAddress3" [maxLength]="labels?.validationData?.address?.maxLength" name="Dealer Name" [className]="'form-control'" [placeholder]="'Fill Address 3'"></app-custom-input>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="toDeductCharges6" [(ngModel)]="thirdPartyObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="toDeductCharges6"
                [checked]="thirdPartyObjInfo['deductChargesFlag']" (change)="selectCheckBox(thirdPartyObjInfo['deductChargesFlag'],6)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input type="checkbox" id="thirdPartyTranches" [(ngModel)]="thirdPartyObjInfo['trancheDisbursementFlag']" formControlName="trancheDisbursementFlag" class="thirdPartyTranches"
                [checked]="thirdPartyObjInfo['trancheDisbursementFlag']" (change)="selectTranche(thirdPartyObjInfo['trancheDisbursementFlag'],6,false)">
              <span class="deduct_Charges disburse-checkbox">{{labels?.disburseInTranches}}</span>
            </div>
          </div>

          <div class="row" *ngIf="showThirdPartyTrancheTable">
            <form [formGroup]="trancheTPForm">
              <div class="disbursement-table-section">
                  <table formArrayName="trancheTpArray" class="table disbursement-table">
                      <thead>
                        <tr>
                          <th>#</th>
                          <th>{{labels?.disbursementType}}</th>
                          <th>{{labels?.disbursementPercent}}</th>
                          <th>{{labels?.disbursementAmount}}</th>
                          <th>{{labels?.disbursementDate}}</th>
                          <th>{{labels?.action}}</th>                   
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let trance of trancheTPForm['controls'].trancheTpArray['controls']; let i=index" [formGroupName]="i">
                          <td width="8%">
                            <div>
                              Tranche {{i+1}}
                            </div>
                          </td>
                          <td width="15%">
                            <div class="viewable-field">
                                <app-custom-input [hidden]="true" [(ngModel)]="trancheTpList[i].disbursement_id"  formControlName="disbursement_id" [className]="'form-control'" [type]="'number'">
                                  </app-custom-input>
                                  <app-custom-input [hidden]="true" [(ngModel)]="trancheTpList[i].tranche_disbursement_id"  formControlName="tranche_disbursement_id" [className]="'form-control'" [type]="'number'">
                                    </app-custom-input>
                              <mat-form-field [ngClass]="onlyViewable? 'readOnlyClass' : ''">
                                <mat-select [(ngModel)]="trancheTpList[i].tranche_disbursement_type" formControlName="tranche_disbursement_type">
                                  <mat-option value=""> Select </mat-option>
                                  <mat-option *ngFor="let x of trancheDisbLov" [value]="x.key">{{ x.value}}</mat-option>
                                </mat-select>
                              </mat-form-field>
                            </div>
                          </td>
                          <td width="15%">
                            <!-- <input type="text"  class="form-control text-field" [(ngModel)]="trancheTpList[i].disbursement_percentage"
                               name="trancheTpList[i].disbursement_percentage" formControlName="disbursement_percentage" />          -->
                               <app-custom-input [(ngModel)]="trancheTpList[i].disbursement_percentage"  [formControl]="trance.controls['disbursement_percentage']" [className]="'form-control'" 
                               [isDirty]="isDirty" [type]="'percent'" (keyup)="validatePercentage(trancheTpList,'6',i)">
                                </app-custom-input>                
                          </td>
                          <td width="15%">
                            <input type="text"  class="form-control text-field" [(ngModel)]="trancheTpList[i].tranche_disbursement_amount"
                              name="trancheTpList[i].tranche_disbursement_amount" formControlName="tranche_disbursement_amount" 
                              [readOnly]="true" />
                          </td>
                          <td width="18%">
                            <div *ngIf="i==0">
                              <input type="text"  class="form-control text-field" [(ngModel)]="trancheTpList[i].trancheDisburseDate"
                                name="trancheTpList[i].trancheDisburseDate" formControlName="trancheDisburseDate" [readOnly]='true'/>
                         <!-- <kendo-datepicker class="form-control mandatory" formControlName="trancheDisburseDate" [(ngModel)]="trancheTpList[i].trancheDisburseDate" [format]="'dd/MM/yyyy'" 
                           placeholder="tranche Date" [activeView]="'decade'"></kendo-datepicker> -->
                           </div>
                          </td>
                          <td class="text-center" width="10%">
                            <div>
                              <button class="delete-btn mr-8" (click)="deleteRow(i,6)" title="delete">
                                <img src="assets/images/delete-icon.png" />
                              </button>
                              <button class="plus-btn" (click)="addRow('6')" [disabled]="trancheTPForm.invalid" title="add" >
                                <img src="assets/images/plus-icon.png" />
                              </button>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
              </div>
            </form>
       </div>


        </div>
      </form>

      <!--container 7-->
      <!-- *ngIf="disburseToIBT" -->
      <form [formGroup]="ibtDetailsForm" *ngIf="false">
        <div>
          <h4 class="title">Internal BT</h4>

          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">Favoring Name
            <sub class="star_red_col">*</sub>
                </label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <input [(ngModel)]="internalBTObjInfo['ibtFavoringName']" formControlName="ibtFavoringName" type="text" class="form-control mandatory"
                id="thirdPartyBank_Details" placeholder="Bank Details" name="thirdPartyBank_Details" value="ESFB"
               />
            </div>
          </div>

          <div class="form-group">
            <label for="lead_number" class="control-label col-sm-5 col-md-4 col-lg-3">Loan Account Number<sub
                class="star_red_col">*</sub></label>
            <div class="col-sm-6 col-md-4 col-lg-3">
              <app-custom-input [(ngModel)]="internalBTObjInfo['ibtLoanAccNumber']" formControlName="ibtLoanAccNumber" [className]="'form-control mandatory'"
                [placeholder]="'loan Account Number'" [patternCheck]="regexPattern.amount" [isDirty]="isDirty"
                [type]="'number'">
              </app-custom-input>
            </div>
          </div>

          <div class="form-group">
            <label class="control-label col-sm-5 col-md-4 col-lg-3 hide-label"></label>
            <div class="col-sm-6 col-md-4 col-lg-4">
              <input type="checkbox" id="" [(ngModel)]="internalBTObjInfo['deductChargesFlag']" formControlName="deductChargesFlag" class="deduct_Charges"
                [checked]="internalBTObjInfo['deductChargesFlag']">
              <span class="deduct_Charges disburse-checkbox">{{labels?.applyDeductDisbursement}}</span>
            </div>
          </div>


        </div>
      </form>
    </div>
  </form>
  <div class="btn-sec clear-both row" id="clickButton">
    <div class="col-sm-5">
    </div>
    <div class="col-sm-7 text-right">
      <button (click)="onBack()" class="btn btn-primary " type="button" *ngIf="showSaveButton == true">Back </button>
      <button (click)="saveAndUpdate()" class="btn btn-primary " type="button" *ngIf="roleType != 4 && roleType != 5" >Save </button>
      
      <button data-toggle="modal" data-target="#myModal" class="btn btn-primary " type="button" *ngIf="roleType == '5'">Book Loan </button>
      <button (click)="saveAndUpdate('next')" class="btn btn-primary js-btn-next" type="button" *ngIf="roleType != 4 && roleType != 5 && roleType !== 7" > Next </button>
      <button (click)="onNext()" class="btn btn-primary js-btn-next" type="button" *ngIf="roleType == 4 || roleType == 7" > Next </button>
    </div>
  </div>
</div>
<div class="modal fade" id="myModal" role="dialog">
  <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h4 class="modal-title">Submit to Loan Creation</h4>
          </div>
          <div class="modal-body" >
              <p>Record will be submitted for loan booking. Are you sure?</p>
          </div>
          <!-- <div class="modal-body" *ngIf = "roleType == '5'">
          <p>Are you sure you want to move lead to CPC maker?</p>
      </div> -->
          <div class="modal-footer">
              <button type="button" class="btn btn-primary " (click)="sendLoanCreationWrapper()"  
                  data-dismiss="modal">Yes</button> &nbsp;
              <button type="button" class="btn btn-primary " data-dismiss="modal">No</button>
          </div>
      </div>

  </div>
</div>
