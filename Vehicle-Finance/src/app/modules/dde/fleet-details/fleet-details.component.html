<!-- <div class="content"> -->
<form class="multisteps-form__form" style="height: 400px;" [formGroup]="fleetForm" *ngIf="this.fleetForm">
    <!-- <div class="multisteps-form__panel basic_scroll js-active" data-animation="scaleIn"> -->
    <div class="container">
        <div class="row">
            <div class="col-sm-6">
              </div>
              <div class="col-sm-6 text-right">
                <span id="edit_vehicle_details_replace"></span>
                <a id="back_vehicle_details"
                  ><button class="btn btn-primary mrg-10" type="button" (click)="openUploadModal()">
                    Upload
                  </button></a
                >
              </div>
        </div>
        <div class="row">

            <div class="table-responsive application">
                <table class="table">

                    <thead>
                        <tr class="table-head-bg text-center">
                            <td role="columnheader">{{labels.sNo}} </td>
                            <td role="columnheader">{{labels.regdNo }} </td>
                            <td role="columnheader">{{labels.regdOwner}}</td>
                            <td role="columnheader" style="min-width: 165px;">{{labels.relation}}</td>
                            <td role="columnheader" style="min-width: 165px;"> {{ labels.vechicalRegion }}</td>
                            <td role="columnheader" style="min-width: 200px;">{{labels.make}} </td>
                            <td role="columnheader" style="min-width: 200px;">{{ labels.vechicalType }}</td>
                           <td role="columnheader" style="min-width: 200px;"> {{ labels.assetSegement }}</td>  
                           <td role="columnheader" style="min-width: 200px;">{{labels.assetModel}}</td>
                           <td role="columnheader">{{labels.yom}} </td>
                            <td role="columnheader" style="min-width: 120px;">{{labels.financier}} </td>
                            <td role="columnheader">{{labels.loanNo}} </td>
                            <td role="columnheader">{{labels.purchaseDate}} </td>
                            <td role="columnheader">{{labels.tenure}} </td>
                            <td role="columnheader">{{labels.accrued}} </td>
                            <td role="columnheader">{{labels.seasoning}} </td>
                            <td role="columnheader">{{labels.ad}} </td>
                            <td role="columnheader">{{labels.pd}} </td>
                            <td role="columnheader">{{labels.gridValue}}</td>
                            <td role="columnheader">{{labels.track}} </td>
                            <td role="columnheader">{{labels.action}} </td>
                        </tr>
                    </thead>
                    <tbody formArrayName="Rows">
                        <!-- <tr id="applicant_1_row" *ngFor="let itemrow of fleetForm.get('Rows')['controls']; let i=index;let l=last" [formGroupName]="i"> -->
                        <tr id="applicant_1_row" *ngFor="let itemrow of fleetForm.get('Rows')['controls']; let i=index;let l=last" [formGroupName]="i">

                            <td>{{i+1}}</td>
                            <td style="min-width: 150px;">
                                <app-custom-input formControlName="regdNo" 
                                    [className]="'form-control mandatory'" 
                                    [placeholder]="'regdNo'" 
                                    [maxLength]="validationData?.vehicleRegNo['maxLength']" 
                                    [isRequired]="'Registration number is mandatory'" 
                                    [type]="validationData?.vehicleRegNo['type']"
                                    [isDirty]="isDirty"
                                    [patternCheck]="validationData?.vehicleRegNo.pattern"

                                    [inputClass]="'input-upper'"
                                    [minLength]="validationData?.vehicleRegNo['minLength']">
                                </app-custom-input>

                                <!-- <div>

                                    <input type="text" class="form-control input_value height input-upper" placeholder="Registration No" formControlName="regdNo" maxlength="12">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdNo'].touched && !itemrow.controls['regdNo'].vaild">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdNo'].hasError('required')">
                                            Registration number is needed
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdNo'].hasError('minlength')">
                                            Invalid registration number
                                        </div>

                                    </div>
                                </div> -->
                            </td>
                            <td style="min-width: 130px;">
                                <!-- <div>
                                    
                                    <input type="text" class="form-control input_value height input-upper" placeholder="Owner Name" formControlName="regdOwner" maxlength="30">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdOwner'].touched && !itemrow.controls['regdOwner'].vaild">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdOwner'].hasError('required')">
                                            Owner name is needed
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['regdOwner'].hasError('pattern')">
                                            Owner name should be in chars only
                                        </div>
                                        <div *ngIf="itemrow.controls['regdOwner'].hasError('regdOwner') || itemrow.controls['regdOwner'].hasError('maxlength')">
                                            Invalid owner name
                                        </div>
                                    </div>
                                </div> -->
                                <app-custom-input formControlName="regdOwner" [className]="'form-control mandatory'" [placeholder]="'Owner name'" [maxLength]="validationData?.name.maxLength" [isRequired]="'Owner name is mandatory'" [isDirty]="isDirty" [type]="validationData?.name.type">
                                </app-custom-input>
                            </td>
                            <td style="min-width: 165px;">
                                <app-vf-custom-select [values]="fleetLov?.applicantRelationshipWithLead" formControlName="relation" (change)="relationShipChange($event)" [isRequired]="'Please select alteast one '">
                                </app-vf-custom-select>

                                <div class="cus-mandatory-field" *ngIf="itemrow.controls['relation'].touched && !itemrow.controls['relation'].vaild">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['relation'].hasError('required')">
                                        relation is mandatory
                                    </div>
                                </div>
                            </td>
                            <td>
                                <app-vf-custom-select [values]="regionLov[i]" [id]="'vechical_region'"
                                    formControlName="region" [isRequired]="'Vehicle Region Required'"
                                    (change)="onVehicleRegion($event.target.value, itemrow,i)" [isDirty]="isDirty">
                                </app-vf-custom-select>
    
                            </td>
                            <td style="min-width: 200px;">
                                <app-vf-custom-select  (change)="onAssetMake($event.target.value, itemrow , i)"
                                 [values]="vehicleManufacturer[i]" formControlName="make" (change)="makeChange($event)" [isRequired]="'Please select atleast one'">
                                </app-vf-custom-select>
                                <div class="cus-mandatory-field" *ngIf="itemrow.controls['relation'].touched && !itemrow.controls['relation'].vaild">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['relation'].hasError('required')">
                                        make is mandatory
                                    </div>
                                </div>
                            </td>
                            <td>
                              
                        <app-vf-custom-select [values]="vehicleTypeLov[i]" [id]="'vechical_type'"
                            formControlName="vehicleType" [isRequired]="'Vehicle Type Required'"
                            (change)="onVehicleType($event.target.value, itemrow, i)" [isDirty]="isDirty">
                        </app-vf-custom-select>

                            </td>
 
                            <td>
                                <app-vf-custom-select [values]="assetBodyTypeLov[i]" [id]="'asset_body_type'"
                                formControlName="assetBodyType" [isRequired]="'Asset Body Type Required'"
                                (change)="onAssetBodyType($event.target.value, itemrow , i)" [isDirty]="isDirty">
                            </app-vf-custom-select>
                            </td>
                            <td>

                                <app-vf-custom-select [values]="assetModelTypeLov[i]" formControlName="assetModel"
                                    [id]="'asset_model'" [isRequired]="'Asset Model Required'"
                                    (change)="onAssetModel($event.target.value, itemrow , i)" [isDirty]="isDirty">
                                </app-vf-custom-select>
                            </td>
                       
                            <!-- <td><input type="text" class="input_value" value="TA" formControlName="make"></td> -->
                            <td>
                                <div>
                                    <!-- <input type="text" class="form-control  t input_value height" placeholder=" Manufacturing Year" formControlName="yom" maxlength="4"> -->
                                    <!-- <span *ngIf="submitted && itemrow.get('yom').errors" style="color:red;" class="invalid-feedback">
                                        <span *ngIf="itemrow.get('yom').errors.required">yom is
                                            required</span>
                                    <span *ngIf="itemrow.get('regdNo').errors.pattern"> Invalid reg no</span>
                                    <span *ngIf="itemrow.get('yom').errors.minLength"></span> invalid yom

                                    </span> -->
                                    <div style="width: 90px;">
                                        <app-custom-input
                                         formControlName="yom"
                                          [className]="'form-control mandatory'"
                                           [placeholder]="'YOM'" 
                                           [maxLength]="formValidation?.validationData?.yom.maxLength" 
                                           [isRequired]="'YOM mandatory'"
                                            [type]="formValidation?.validationData?.yom.type" 
                                            [custom]="yearCheck"
                                            [isDirty]="isDirty"
                                            (change)="onGetDateValue($event ,i)"
                                            >
                                        </app-custom-input>
                                    </div>
                                    <!-- <div class="cus-mandatory-field" *ngIf="itemrow.controls['yom'].touched && !itemrow.controls['yom'].vaild">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['yom'].hasError('required')">
                                            Manufacturing year is needed
                                        </div>
                                        <div *ngIf="itemrow.controls['yom'].hasError('minlength') || itemrow.controls['yom'].hasError('maxlength')">
                                            Invalid manufacturing year
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['yom'].hasError('pattern')">
                                            Manufacturing year should be in number
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['yom'].errors && itemrow.controls['yom'].errors['incorrect']">
                                            Yom not grater current Year
                                        </div>
                                    </div> -->

                                </div>
                            </td>

                            <!-- <td><input type="text" class="form-control input_value height" value="BAJAJ" formControlName="financier"></td>-->
                            <td style="min-width: 120px;">
                                <app-vf-custom-select [values]="fleetLov?.vehicleFinanciers" formControlName="financier" (change)="financierChange($event)" [isRequired]="'Please select atleast one'">
                                </app-vf-custom-select>

                            </td>
                            <td style="min-width: 150px;">
                                <!-- <div> -->
                                <app-custom-input formControlName="loanNo" 
                                    [className]="'form-control mandatory'" 
                                    [placeholder]="'loanNo'" 
                                    [maxLength]="validationData?.loanNumber.maxLength" 
                                    [isRequired]="'Loan No is mandatory'" 
                                    [type]="validationData?.loanNumber.type" 
                                    [isDirty]="isDirty"
                                    [inputClass]="'input-upper'"
                                    [minLength]='validationData?.loanNumber.minLength'>
                                </app-custom-input>
                                <!-- <input type="text" class="form-control  input_value height" placeholder="Loan No" formControlName="loanNo" maxlength="20"></div>

                                <div class="cus-mandatory-field" *ngIf="itemrow.controls['loanNo'].touched && !itemrow.controls['loanNo'].vaild">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['loanNo'].hasError('required')">
                                        Loan no is needed
                                    </div>
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['loanNo'].hasError('maxLength')">
                                        Invalid loan no
                                    </div>

                                </div> -->


                            </td>
                            <!-- <td><input type="text" class="form-control input_value height" value="01-010-16" formControlName="purchaseDate"></td> -->
                            <td>
                                <div class="form-group ">
                                    <div class='input-group date' id='datetimepicker1'>
                                        <!-- <span class="input-group-addon"><span
                                                class="glyphicon glyphicon-calendar"></span>
                                        </span> -->
                                        <kendo-datepicker width="100%" class="form-control mandatory" formControlName="purchaseDate" [format]="'dd/MM/yyyy'" [max]="toDayDate" placeholder="dd/mm/yyyy" [activeView]="'decade'">
                                        </kendo-datepicker>
                                        <!-- <input type='date' class="form-control" formControlName="purchaseDate"> -->

                                    </div>
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['purchaseDate'].touched && !itemrow.controls['purchaseDate'].vaild">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['purchaseDate'].hasError('required')">
                                            Purchase date is needed
                                        </div>
                                    </div>
                                </div>
                            </td>
                            <td style="min-width: 120px;">

                                <app-custom-input
                                formControlName="tenure"
                                [className]="'form-control mandatory'"
                                [placeholder]="'Tenure'"
                                [maxLength]="validationData?.tenurePaid['maxLength']"
                                [isRequired]="'Tenure is mandatory'"
                                [type] = "validationData?.tenurePaid['type']"
                                [isDirty]="isDirty"
                                >
                              </app-custom-input>
<!-- 
                                <div><input type="number" class="form-control  input_value height" formControlName="tenure" placeholder="Tenure">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['tenure'].touched && !itemrow.controls['tenure'].valid">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['tenure'].hasError('required')">
                                            Tenure is required
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['tenure'].hasError('maxLength')">
                                            Invalid tenure
                                        </div>
                                    </div>
                                </div> -->
                            </td>
                            <td style="min-width: 120px;">
                                <div>
                                    <app-custom-input formControlName="paid"
                                     [className]="'form-control mandatory'"
                                      [placeholder]="'paid'"
                                       [maxLength]="validationData?.tenurePaid['maxLength']" 
                                       [isRequired]="'Accrued is mandatory'"
                                        [type]="validationData?.tenurePaid['type']" 
                                        [isDirty]="isDirty"
                                        (keyup)="checkPaid(event ,i)"
                                        (change) = "calcSeasoning(event ,i)">
                                    </app-custom-input>

                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['paid'].errors && itemrow.controls['paid'].errors['incorrect']">
                                        Accrued not greater than Tenure
                                    </div>

                                    <!-- <input type="number" class="form-control  input_value height" placeholder="Paid" formControlName="paid" max="3">
                                    <div class="cus-mandatory-field" *ngIf="itemrow.controls['paid'].touched && !itemrow.controls['paid'].valid">
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['paid'].hasError('required')">
                                            Paid is required
                                        </div>
                                        <div class="cus-mandatory-field" *ngIf="itemrow.controls['paid'].hasError('maxLength')">
                                            Invalid lpaid
                                        </div>


                                    </div> -->
                                </div>
                            </td>
                            <td style="min-width: 120px;">
                                <!-- <input type="text" class="form-control input_value height" formControlName="seasoning"> -->
                                <app-custom-input
                                formControlName="seasoning"
                                [className]="'form-control mandatory'"
                                [placeholder]="''"
                                >
                                 </app-custom-input>
                            </td>
                            <td style="min-width: 120px;">
                                <!-- <input type="number" class="form-control input_value height" formControlName="ad"> -->
                                <app-custom-input
                                formControlName="ad"
                                [className]="'form-control mandatory'"
                                [placeholder]="''"
                                >
                                 </app-custom-input>
                            </td>
                            <td style="min-width: 120px;">
                                <!-- <input type="number" class="form-control input_value height" formControlName="pd"> -->
                                <app-custom-input
                                formControlName="pd"
                                [className]="'form-control mandatory'"
                                [placeholder]="''"
                                >
                                 </app-custom-input>
                            </td>
                            <td style="min-width: 120px;">
                                <!-- <input type="number" class="form-control input_value height" formControlName="gridValue"> -->
                                <app-custom-input
                                formControlName="gridValue"
                                [className]="'form-control mandatory'"
                                [placeholder]="''"
                                >
                                 </app-custom-input>
                            </td>
                            <td><u><button class="a_tag" (click)="onFormSubmit(i)">RTR</button></u></td>
                            <!-- <td><i class="fa fa-plus" aria-hidden="true" id="addmorePOIbutton"
                                                (click)="addNewRow()"></i> &nbsp;
                                            <i class="fa fa-minus" aria-hidden="true" id="remove_item_applicant"
                                                (click)="deleteRow(i)"></i></td> -->
                            <td>
                                <button class="fa fa-plus" aria-hidden="true" id="addmorePOIbutton" value="Add" [disabled]="disableSaveBtn" (click)="addNewRow()"></button>
                                <button type="button" class="fa fa-minus" aria-hidden="true" id="delPOIbutton" [disabled]="disableSaveBtn" value="Delete" (click)="deleteRow(i,fleetForm.value.Rows)"></button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- </div> -->

    <!-- </div> -->


    <div class="btn-sec clear-both row cst_btm_btns">
        <div class="col-sm-5">

        </div>
        <div class="col-sm-7 text-right ">
            <button class="btn btn-primary " type="button" (click)="toReference()">Back</button>
            <button class="btn btn-primary " type="button" (click)="onFormSubmit(i)" *ngIf="!disableSaveBtn">Save </button>
            <button class="btn btn-primary js-btn-next" type="button" (click)="onFormSubmit('next')"> Next </button>
        </div>
    </div>
    <div
  class="modal"
  data-dismiss="modal"
  id="myModal"
  [ngClass]="{ 'dis-block': showUploadModal }"
>
  <div class="modal-dialog top-space">
    <div class="modal-content">
      <div class="modal-header">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          (click)="onClose()"
        >
          ×
        </button>
        <h4 class="modal-title">Upload Document</h4>
      </div>

      <div class="modal-body">
        <div class="row">
          <!-- <div class="preview-panel">
            <i class="fa fa-picture-o" aria-hidden="true"></i> Preview Panel:
          </div> -->

          <br />

          <div class="row">
            <div class="col-md-3 col-lg-3 col-sm-3 col-xs-12">
            <!-- <div class="col-12 mid-mar">
            <img
              [src]="imageUrl ? 'data:image/jpeg;base64,' + imageUrl : ''"
              height="150px"
              width="150px"
            />
           </div> -->
           <div class="col-12 mid-text">
            <button
            class="btn upload-btn"
            (click)="fileInput.click()"
            *ngIf="!fileUrl"
          >
            Select Document
          </button>
          <button
            class="btn upload-btn"
            (click)="removeFile()"
            *ngIf="fileUrl"
          >
            Change Document</button
          >
          <button
            class="btn upload-btn remove-btn"
            (click)="removeFile()"
            *ngIf="fileUrl"
          >
            Remove
          </button>

           </div>
            
            
          </div>
        
        <div class="col-md-8 col-lg-8 col-sm-8 col-xs-12">
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="col-6">Name : {{ fileName }} </div>
            <!-- <div class="col-6 file-info">{{ fileName }}</div> -->
          </div>
          <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
            <div class="col-6">Size : {{ fileSize }}</div>
            <!-- <div class="col-6 file-info">{{ fileSize }}</div> -->
          </div>
          </div>
          </div>
        </div>
        <div *ngIf="showError" class="show-error">
          {{ showError }}
        </div>
      </div>

      <div class="modal-footer text-center">
        <button
          type="button"
          class="btn btn-info"
          data-dismiss="modal"
          id="reject_dlead"
          (click)="uploadFile()"
          [disabled]="!fileUrl"
        >
          Upload
        </button>
        <!-- <button type="button" class="btn btn-danger" data-dismiss="modal">
          Cancel
        </button> -->
      </div>
    </div>
  </div>
  <input
    #fileInput
    type="file"
    style="visibility: hidden;"
    (input)="onFileSelect($event)"
  />
</div>

</form>

<app-upload-discussion *ngIf="docsFleetDetails" [showUpload]="!!docsFleetDetails" [details]="docsFleetDetails" (cancel)="onModalClose()" (save)="saveValidRecords()"></app-upload-discussion>





 
<!-- 
        <div class="btn-sec clear-both row text-right">
            <div class="col-sm-12">
                <button class="btn btn-primary cus-btn-sty" type="button">Back</button>
                <p class="btn btn-primary save cus-btn-sty"> Save </p>
                <button class="btn btn-primary cus-btn-sty" type="button" (click)="showFormValues()">Next</button>
            </div>
        </div> -->