<div class="container row">
  <div class="table-responsive application">
    <table class="table" style="height: 30px;">
      <tr>
        <td>{{ labels?.applicant }}</td>
        <td>Ram</td>
        <td>{{ labels?.applicantType }}</td>
        <td>Co-applicant</td>
        <td>{{ labels?.bureauScore }}</td>
        <td>700</td>
      </tr>
    </table>
  </div>
</div>
<form class="multisteps-form__form" [formGroup]="odDetailsForm">
  <div class="multisteps-form">
    <div class="multisteps-form__panel js-active" data-animation="scaleIn">
      <div class="container-fluid">
        <div class="row">
          <div class="table-responsive application">
            <div class="od-row">
              <div class="col-md-10">
                <h3 class="m-0">{{ labels?.odDetails }}</h3>
              </div>
              <div class="col-md-2 text-right">
                <button type="button" class="btn caption btn-sm" (click)="addOdDetails()"><i
                    class="fa fa-plus fa-fw"></i> Add Row</button>
              </div>
            </div>
            <div class="clearfix"></div>
            <table id="POITable" border="1" class="table mb-15">
              <thead>
                <tr class="">
                  <th role="columnheader" class="caption">{{ labels?.odType }}<sub class="star_blue_col">*</sub></th>
                  <th role="columnheader" class="caption">
                    {{ labels?.odAmount }}<sub class="star_blue_col">*</sub>
                  </th>
                  <th role="columnheader" class="caption">{{ labels?.typeOfloan }}<sub class="star_blue_col">*</sub>
                  </th>
                  <ng-container *ngIf="selctedLoan !== 'Others'">
                    <th role="columnheader" class="caption">
                      {{ labels?.otherTypeOfloan
                      }}<sub class="star_blue_col">*</sub>
                    </th>
                  </ng-container>
                  <ng-container *ngIf="selctedLoan === 'Others'">
                    <th role="columnheader" class="caption">
                      {{ labels?.otherTypeOfloan
                      }}<sub class="star_red_col">*</sub>
                    </th>
                  </ng-container>
                  <th role="columnheader" class="caption">
                    {{ labels?.odDpd }}<sub class="star_blue_col">*</sub>
                  </th>
                  <th role="columnheader" class="caption">{{labels?.action}}</th>
                </tr>
              </thead>
              <tbody formArrayName="odDetailsList">
                <tr class="text-center" id="applicant_1_row" *ngFor="
                    let item of odDetailsForm.get('odDetailsList')[
                      'controls'
                    ];
                    let i = index
                  " [formGroupName]="i">

                  <td data-title="OD Type">
                    <select class="form-control mandatory" formControlName="odType">
                      <option [value]="odTypeValue" *ngFor="let odTypeValue of odTypeValues">{{odTypeValue}}</option>
                    </select>
                  </td>

                  <td data-title="OD Amount">
                    <app-custom-input formControlName="odAmount" [placeholder]="'OD Amount'"
                      [type]="labels?.validationData?.amountValue?.type" [className]="'form-control mandatory'"
                      [maxLength]="labels?.validationData?.amountValue?.maxLength" [isDirty]="isDirty">
                    </app-custom-input>
                  </td>
                  <td data-title="Type of loan">
                    <select class="form-control mandatory" formControlName="typeOfLoan"
                      (change)="onSelectLoan($event.target.value)">
                      <option [value]="loanType" *ngFor="let loanType of loanTypes">{{loanType}}</option>
                    </select>
                  </td>
                  <ng-container *ngIf="selctedLoan !== 'Others'">
                    <td data-title="Other type of loan">
                      <app-custom-input formControlName="otherTypeOfloan" [placeholder]="'Other type of loan'"
                        [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength" [isDirty]="isDirty"
                        [isDisabled]="'true'">
                      </app-custom-input>
                    </td>
                    <td data-title="OD DPD">
                      <app-custom-input formControlName="odDpd" [placeholder]="'OD DPD'"
                        [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.yom?.maxLength" [isDirty]="isDirty" [isDisabled]="'true'">
                      </app-custom-input>
                    </td>
                  </ng-container>
                  <ng-container *ngIf="selctedLoan === 'Others'">
                    <td data-title="Other type of loan">
                      <app-custom-input formControlName="otherTypeOfloan" [placeholder]="'Other type of loan'"
                        [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength" [isDirty]="isDirty"
                        [isRequired]="'Other type of loan mandatory'">
                      </app-custom-input>
                    </td>
                    <td data-title="OD DPD">
                      <app-custom-input formControlName="odDpd" [placeholder]="'OD DPD'"
                        [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.yom?.maxLength" [isDirty]="isDirty"
                        [isRequired]="'OD DPD mandatory'">
                      </app-custom-input>
                    </td>
                  </ng-container>
                  <!-- <td data-title="Other type of loan">
                    <app-custom-input formControlName="otherTypeOfloan" [placeholder]="'Other type of loan'"
                      [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                      [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength" [isDirty]="isDirty">
                    </app-custom-input>
                  </td>
                  <td data-title="OD DPD">
                    <app-custom-input formControlName="odDpd" [placeholder]="'OD DPD'"
                      [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                      [maxLength]="labels?.validationData?.yom?.maxLength" [isDirty]="isDirty">
                    </app-custom-input>
                  </td> -->

                  <td data-title="Actions">
                    <i type="button" class="fa fa-trash" aria-hidden="true" id="delPOIbutton" value="Delete"
                      (click)="removeOdDetails(i)"></i>
                  </td>
                </tr>
                <tr *ngIf="odDetailsListArray.length > 0">
                  <td>Total OD Amount</td>
                  <td>25256655</td>
                </tr>
              </tbody>
            </table>
            <hr>
            <div class="form-group od-row">
              <div class="col-md-2"><label>Highest DPD in last 6M (under individual or joint status)</label></div>
              <div class="col-md-2">
                <select name="" id="" class="form-control form-control-sm" formControlName="highestDpdInLastSixMonths">
                  <option [value]="proof" *ngFor="let proof of proofs">{{proof}}</option>

                </select>
              </div>
              <div class="col-md-2"><label>Highest DPD in last 12M (under individual or joint status)</label></div>
              <div class="col-md-2">
                <select name="" id="" class="form-control form-control-sm"
                  formControlName="highestDpdInLastTwelveMonths">
                  <option [value]="proof" *ngFor="let proof of proofs">{{proof}}</option>

                </select>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="form-group od-row">
              <div class="col-md-2"><label>Count of  written off loans</label></div>
              <div class="col-md-2">
                <app-custom-input formControlName="writtenOffLoans" [placeholder]="'Count of  written off loans'"
                  [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                  [maxLength]="labels?.validationData?.yom?.maxLength">
                </app-custom-input>
              </div>
              <div class="col-md-2"><label>Count of  written off loans along with suite filed</label></div>
              <div class="col-md-2">
                <app-custom-input formControlName="writtenOffLoansWithSuiteFiled"
                  [placeholder]="'Count of  written off loans with Suite filed'"
                  [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                  [maxLength]="labels?.validationData?.yom?.maxLength">
                </app-custom-input>
              </div>
              <div class="col-md-2"><label>Count of  loss loans</label></div>
              <div class="col-md-2">
                <app-custom-input formControlName="lossLoans" [placeholder]="'Count of  loss loans'"
                  [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                  [maxLength]="labels?.validationData?.yom?.maxLength">
                </app-custom-input>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="form-group od-row">
              <div class="col-md-2"><label>Count of settled loans</label></div>
              <div class="col-md-2">
                <app-custom-input formControlName="settledLoans" [placeholder]="'Count of settled loans'"
                  [type]="labels?.validationData?.yom?.type" [className]="'form-control mandatory'"
                  [maxLength]="labels?.validationData?.yom?.maxLength">
                </app-custom-input>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="form-group od-row">
              <div class="col-md-2"><label>Clearance Proof Collected</label></div>
              <div class="col-md-2">
                <select name="" id="" class="form-control form-control-sm" formControlName="proofCollected">
                  <option [value]="proof" *ngFor="let proof of proofs">{{proof}}</option>

                </select>
              </div>
              <div class="col-md-2"><label>Clearance Proof</label></div>
              <div class="col-md-2">
                <app-custom-input formControlName="clearenceProof" [placeholder]="'Clearence Proof'"
                  [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                  [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength">
                </app-custom-input>
              </div>
              <div class="clearfix"></div>
            </div>
            <div class="form-group od-row">
              <div class="col-md-2"><label>CIBIL OD DPD JUSTIFICATION</label></div>
              <div class="col-md-10">
                <!-- <app-custom-input formControlName="clearenceProof" [placeholder]="'Clearence Proof'"
                [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength"
                 [isDirty]="isDirty" >
              </app-custom-input> -->
                <textarea class="form-control form-control-sm" placeholder="Text Area"
                  formControlName="cibilJustification"
                  [ngClass]="{'has-error':!odDetailsForm.controls['cibilJustification'].valid}"></textarea>
                  <div *ngIf="odDetailsForm.controls['cibilJustification'].hasError('pattern')" [ngClass]="'error'">
                    Invalid Message /  Special Characters not allowed
                  </div>
                  <div *ngIf="odDetailsForm.controls['cibilJustification'].hasError('maxlength')" [ngClass]="'error'">
                    CIBIL OD DPD JUSTIFICATION can not exceed 200 characters long.
                  </div>
              </div>
              <div class="clearfix"></div>
            </div>
            <hr>
            <div class="table-responsive application mt-3">
              <div class="caption text-left mb-5 text-bold">{{labels?.loanEnquiriesInLast30DaysWithTypeOfLoan}}</div>
              <div class="text-right"><button type="button" class="btn caption btn-sm"
                  (click)="addLastThirtyDaysLoan()"><i class="fa fa-plus fa-fw"></i> Add Row</button></div>
              <table id="POITable_other" border="0" class="table">
                <thead>
                  <tr class="">
                    <th role="columnheader" class="caption">{{ labels?.member }}<sub class="star_blue_col">*</sub></th>
                    <th role="columnheader" class="caption">
                      {{ labels?.enquiryDate }}
                      <sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">{{ labels?.typeOfloan }}<sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">
                      {{ labels?.enquiryAmount }}<sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">{{labels?.action}}</th>

                  </tr>
                </thead>
                <tbody formArrayName="loanEnquiryInThirtyDays">
                  <tr *ngFor="
                    let item of odDetailsForm.get('loanEnquiryInThirtyDays')[
                      'controls'
                    ];
                    let i = index
                  " [formGroupName]="i">
                    <td data-title="Member">
                      <app-custom-input formControlName="member" [placeholder]="'Member'"
                        [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength" [isDirty]="isDirty">
                      </app-custom-input>
                    </td>
                    <td data-title="Enquiry date">
                      <kendo-datepicker class="form-control" formControlName="enquiryDate" [activeView]="'decade'"
                        [format]="'dd/MM/yyyy'" [max]="toDayDate" placeholder="Valuation Date">
                      </kendo-datepicker>
                    </td>
                    <td data-title="Type of loan">
                      <select class="form-control mandatory" formControlName="typeOfLoan">
                        <option [value]="loanType" *ngFor="let loanType of loanTypes">{{loanType}}</option>
                      </select>

                    </td>
                    <td data-title="Enquiry Amount">
                      <app-custom-input formControlName="enquiryAmount" [placeholder]="'Enquiry Amount'"
                        [type]="labels?.validationData?.amountValue?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.amountValue?.maxLength" [isDirty]="isDirty">
                      </app-custom-input>

                    </td>
                    <td data-title="Actions">

                      <i type="button" class="fa fa-trash" aria-hidden="true" id="delPOIbutton" value="Delete"
                        (click)="removeLastThirtyDaysLoan()"></i>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>
            <div class="table-responsive application mt-3">
              <div class="caption text-left mb-5 text-bold">{{labels?.loanEnquiriesInLast60DaysWithTypeOfLoan}}</div>
              <div class="text-right"><button type="button" class="btn caption btn-sm"
                  (click)="addLastSixtyDaysLoan()"><i class="fa fa-plus fa-fw"></i> Add Row</button></div>
              <table id="POITable_other" border="0" class="table">
                <thead>
                  <tr class="">
                    <th role="columnheader" class="caption">{{ labels?.member }}<sub class="star_blue_col">*</sub></th>
                    <th role="columnheader" class="caption">
                      {{ labels?.enquiryDate }}
                      <sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">{{ labels?.typeOfloan }}<sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">
                      {{ labels?.enquiryAmount }}<sub class="star_blue_col">*</sub>
                    </th>
                    <th role="columnheader" class="caption">{{labels?.action}}</th>

                  </tr>
                </thead>
                <tbody formArrayName="loanEnquiryInSixtyDays">
                  <tr *ngFor="
                    let item of odDetailsForm.get('loanEnquiryInSixtyDays')[
                      'controls'
                    ];
                    let i = index
                  " [formGroupName]="i">
                    <td data-title="Member">
                      <app-custom-input formControlName="member" [placeholder]="'Member'"
                        [type]="labels?.validationData?.chasisEngineNo?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.chasisEngineNo?.maxLength" [isDirty]="isDirty">
                      </app-custom-input>
                    </td>
                    <td data-title="Enquiry date">
                      <kendo-datepicker class="form-control" formControlName="enquiryDate" [activeView]="'decade'"
                        [format]="'dd/MM/yyyy'" [max]="toDayDate" placeholder="Valuation Date">
                      </kendo-datepicker>
                    </td>
                    <td data-title="Type of loan">
                      <select class="form-control mandatory" formControlName="typeOfLoan">
                        <option [value]="loanType" *ngFor="let loanType of loanTypes">{{loanType}}</option>
                      </select>

                    </td>
                    <td data-title="Enquiry Amount">
                      <app-custom-input formControlName="enquiryAmount" [placeholder]="'Enquiry Amount'"
                        [type]="labels?.validationData?.amountValue?.type" [className]="'form-control mandatory'"
                        [maxLength]="labels?.validationData?.amountValue?.maxLength" [isDirty]="isDirty">
                      </app-custom-input>

                    </td>
                    <td data-title="Actions">

                      <i type="button" class="fa fa-trash" aria-hidden="true" id="delPOIbutton" value="Delete"
                        (click)="removeLastSixtyDaysLoan()"></i>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="btn-sec clear-both row cst_btm_btns">
      <div class="col-sm-5"></div>
      <div class="col-sm-7 text-right">
        <button class="btn btn-primary dash_href" type="button" routerLink="../exposure">
          Back
        </button>
        <button class="btn btn-primary mar-right8" type="button" (click)=onSubmit();>
          Save
        </button>
        <button class="btn btn-primary dash_href" type="button" routerLink="../psl-data">
          Next
        </button>
      </div>
    </div>
  </div>
</form>