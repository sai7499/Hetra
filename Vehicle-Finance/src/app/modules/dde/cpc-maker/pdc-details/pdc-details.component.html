<form class="form multisteps-form__form" style="height: auto" [formGroup]="pdcForm">
    <div class="container overflow-hidden">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <div class="col-lg-5 col-md-5 col-sm-5"></div>
            <div class="col-lg-7 col-md-7 col-sm-7">
                <button class="btn btn-primary"(click)="addPdcUnit()" *ngIf = "showPdc" >Add PDC Row</button>
                <button class="btn btn-primary"(click)="addSPdcUnit()" *ngIf = "showSpdc" >Add SPDC Row</button>
            </div>
        </div>
        <div class="content">
            
             <div class="multisteps-form__panel js-active" data-animation="scaleIn">
                <div class="panel-group hidden-xs" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading panel-primary" id="headingTwo1">
                            <h4 class="panel-title">
                                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo1">
                                     PDC<i class="fa fa-angle-down"></i>
                                </a>
                              </h4>
                        </div>
                        <div id="collapseTwo1" class="panel-collapse collapse in" aria-expanded="true"  >
                        <div class="panel-body" formArrayName="pdcList">
                            <div class="row" id="show_1_div_identity" *ngFor="let item of pdcForm.get('pdcList')['controls']; let i= index " [formGroupName]="i">
                                <div class="form-group col-sm-6 col-md-3 col-lg-3">
                                    <label for="business_division" class="height_label">Instr.Type {{pdcId}}</label>
      
                                    <!-- <select class="form-control mandatory" id="business_division" formControlName="instrType">
                                        <option value="Cheque">Cheque</option>
                                        <option value="NACH">NACH</option>
                                    </select> -->
                                    <app-vf-custom-select formControlName="instrType" [values]="lovData?.instrumentType" 
                                       [isRequired]="'Please Select Instr Type'"></app-vf-custom-select>
      
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id">Pre EMI / EMI Amount</label> 
                                    <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" name="lead_id" value="" formControlName="emiAmount"> -->
                                    <app-custom-input
                                    formControlName="emiAmount"
                                    [patternCheck]="inputValidation"
                                    [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                    [type]="labels?.validationData?.amountValue?.type"
                                    [isRequired]="'*required'"
                                    [isDirty]="isDirty"
                                    [placeholder]="'EMI Amount'"
                                    
                                  ></app-custom-input>
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id" class="height_label">Instr.No</label>
                                    <!-- <input type="text" class="form-control mandatory" id="lead_id" 
                                        placeholder="" name="lead_id" value="" formControlName= "instrNo"> -->
                                    <app-custom-input
                                    formControlName="instrNo"
                                    [patternCheck]="inputValidation"
                                    [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                    [type]="labels?.validationData?.amountValue?.type"
                                    [isRequired]="'*required'"
                                    [isDirty]="isDirty"
                                    [placeholder]="'Instr No'"
                                    
                                  ></app-custom-input>
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id" class="height_label">Instr.Date</label>
                                     <div class="input-group input-medium">
                                     
                                          <!-- <input type="date" class="form-control date_caps" id="date" formControlName= "instrDate " >  -->
                                          <kendo-datepicker class="form-control" 
                                          formControlName="instrDate" 
                                          [format]="'dd/MM/yyyy'"
                                          [max]="toDayDate"
                                          placeholder="Select Latest Month"
                                          [activeView]="'decade'"
                                          
                                          ></kendo-datepicker>
                                        </div>
                                </div>
                                <div class="form-group col-sm-6 col-md-3 col-lg-3">
                                    <label for="business_division" class="height_label">Instr.Bank Name</label>
      
                                    <!-- <select class="form-control mandatory" id="business_division" formControlName= "instrBankName" >
                                        <option value="Vehicle Finance">ICICI</option>
                                        <option value="Housing Finance">HDFC</option>
                                    </select>  -->
                                    <app-vf-custom-select formControlName="instrBankName" [values]="lovData?.bankMaster" 
                                        [isRequired]="'Please Select Instr Bank'"></app-vf-custom-select>
                                    
      
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id" class="height_label">Instr.Branch Name</label>
                                    <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" 
                                        name="lead_id" value="" formControlName= "instrBranchName"> -->
                                    <app-custom-input
                                    formControlName="instrBranchName"
                                    [patternCheck]="inputValidation"
                                    [maxLength]="labels?.validationData?.name?.maxLength"
                                    [type]="labels?.validationData?.name?.type"
                                    [isRequired]="'*required'"
                                    [isDirty]="isDirty"
                                    [placeholder]="'InstrBranchName'"
                                    
                                  ></app-custom-input>
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id">Instr.Branch Account Number</label>
                                    <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder=""
                                     name="lead_id" value="" formControlName= "instrBranchAccountNumber"> -->
                                    <app-custom-input
                                    formControlName="instrBranchAccountNumber"
                                    [patternCheck]="labels?.validationData?.pdAccountNumber?.pattern"
                                    [maxLength]="labels?.validationData?.pdAccountNumber?.maxLength"
                                    [type]="labels?.validationData?.pdAccountNumber?.type"
                                    [isRequired]="'*required'"
                                    [isDirty]="isDirty"
                                    [placeholder]="'Instr Acc Number'"
                                    
                                  ></app-custom-input>
                                </div>
                                <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                    <label for="lead_id" class="height_label">Instr.Amount</label>
                                    <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" name="lead_id" value="" formControlName= "instrAmount"> -->
                                    <app-custom-input
                                    formControlName="instrAmount"
                                    [patternCheck]="inputValidation"
                                    [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                    [type]="labels?.validationData?.amountValue?.type"
                                    [isRequired]="'*required'"
                                    [isDirty]="isDirty"
                                    [placeholder]="'Instr Amount'"
                                    
                                  ></app-custom-input>
                                </div>
                                <div class="form-group col-lg-2 col-sm-6 col-md-2">
                                    <div class="image-upload" for="upload_files"  >
                                        <i class="fa fa-plus fa-3" aria-hidden="true"  id="add_more_documents1" (click)="addPdcUnit()" ></i> &nbsp; 
                                        <i class="fa fa-minus fa-3" aria-hidden="true"  id="add_more_documents_remove1 "  (click)="deleteRows('pdc',item.value.pdcId,i)"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="panel-group hidden-xs" id="accordion">
                    <div class="panel panel-default">
                        <div class="panel-heading panel-primary" id="headingTwo2">
                            <h4 class="panel-title">
                                <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo2">
                                     SPDC<i class="fa fa-angle-down"></i>
                                </a>
                              </h4>
                        </div>
                        <div id="collapseTwo2" class="panel-collapse collapse in" aria-expanded="true"  >
                            <div class="panel-body" formArrayName="spdcList">
                                <div class="row" id="show_1_div_identity" *ngFor="let item of pdcForm.get('spdcList')['controls']; let i= index " [formGroupName]="i">
                                    <div class="form-group col-sm-6 col-md-3 col-lg-3">
                                        <label for="business_division" class="height_label">Instr.Type</label>
          
                                        <!-- <select class="form-control mandatory" id="business_division" formControlName="instrType">
                                            <option value="Cheque">Cheque</option>
                                            <option value="Housing Finance">NACH</option>
                                        </select>
           -->
           <app-vf-custom-select formControlName="instrType" [values]="lovData?.instrumentType" 
           [isRequired]="'Please Select Instr Type'"></app-vf-custom-select>
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id">Pre EMI / EMI Amount</label>
                                        <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" name="lead_id" value="" formControlName="emiAmount"> -->
                                        <app-custom-input
                                        formControlName="emiAmount"
                                        [patternCheck]="inputValidation"
                                        [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                        [type]="labels?.validationData?.amountValue?.type"
                                        [isRequired]="'*required'"
                                        [isDirty]="isDirty"
                                        [placeholder]="'EMI Amount'"
                                        
                                      ></app-custom-input>
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id" class="height_label">Instr.No</label>
                                        <!-- <input type="text" class="form-control mandatory" id="lead_id" 
                                            placeholder="" name="lead_id" value="" formControlName= "instrNo"> -->
                                        <app-custom-input
                                        formControlName="instrNo"
                                        [patternCheck]="inputValidation"
                                        [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                        [type]="labels?.validationData?.amountValue?.type"
                                        [isRequired]="'*required'"
                                        [isDirty]="isDirty"
                                        [placeholder]="'Instr.No'"
                                        
                                      ></app-custom-input>
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id" class="height_label">Instr.Date</label>
                                         <div class="input-group input-medium">
                                                                                            <!-- <input type="date" class="form-control date_caps" id="date" formControlName= "instrDate " >  -->
                                              <kendo-datepicker class="form-control" 
                                              formControlName="instrDate" 
                                              [format]="'dd/MM/yyyy'"
                                              [max]="toDayDate"
                                              placeholder="Select Latest Month"
                                              [activeView]="'decade'"
                                              
                                              ></kendo-datepicker>
                                            </div>
                                    </div>
                                    <div class="form-group col-sm-6 col-md-3 col-lg-3">
                                        <label for="business_division" class="height_label">Instr.Bank Name</label>
          
                                        <!-- <select class="form-control mandatory" id="business_division" formControlName= "instrBankName" >
                                            <option value="Vehicle Finance">ICICI</option>
                                            <option value="Housing Finance">HDFC</option>
                                        </select>  -->
                                        <app-vf-custom-select formControlName="instrBankName" [values]="lovData?.bankMaster" 
                                        [isRequired]="'Please Select Instr Bank'"></app-vf-custom-select>
                                        
          
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id" class="height_label">Instr.Branch Name</label>
                                        <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" 
                                            name="lead_id" value="" formControlName= "instrBranchName"> -->
                                        <app-custom-input
                                        formControlName="instrBranchName"
                                        [patternCheck]="inputValidation"
                                        [maxLength]="labels?.validationData?.name?.maxLength"
                                        [type]="labels?.validationData?.name?.type"
                                        [isRequired]="'*required'"
                                        [isDirty]="isDirty"
                                        [placeholder]="'Instr.Branch Name'"
                                        
                                      ></app-custom-input>
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id">Instr.Branch Account Number</label>
                                        <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder=""
                                         name="lead_id" value="" formControlName= "instrBranchAccountNumber"> -->
                                        <app-custom-input
                                        formControlName="instrBranchAccountNumber"
                                        [patternCheck]="labels?.validationData?.pdAccountNumber?.pattern"
                                        [maxLength]="labels?.validationData?.pdAccountNumber?.maxLength"
                                        [type]="labels?.validationData?.pdAccountNumber?.type"
                                        [isRequired]="'*required'"
                                        [isDirty]="isDirty"
                                        [placeholder]="'Instr.Branch Account Number'"
                                        
                                      ></app-custom-input>
                                    </div>
                                    <div class="form-group col-lg-3 col-sm-6 col-md-3">
                                        <label for="lead_id" class="height_label">Instr.Amount</label>
                                        <!-- <input type="text" class="form-control mandatory" id="lead_id" placeholder="" name="lead_id" value="" formControlName= "instrAmount"> -->
                                        <app-custom-input
                                        formControlName="instrAmount"
                                        [patternCheck]="inputValidation"
                                        [maxLength]="labels?.validationData?.amountValue?.maxLength"
                                        [type]="labels?.validationData?.amountValue?.type"
                                        [isRequired]="'*required'"
                                        [isDirty]="isDirty"
                                        [placeholder]="'Instr.Amount'"
                                        
                                      ></app-custom-input>
                                    </div>
                                    <div class="form-group col-lg-2 col-sm-6 col-md-2">
                                        <label class="image-upload" for="upload_files">
                                            <i class="fa fa-plus fa-3" aria-hidden="true"  id="add_more_documents1" (click)="addSPdcUnit()" ></i> &nbsp; 
                                            <i class="fa fa-minus fa-3" aria-hidden="true"  id="add_more_documents_remove1" (click)="deleteRows('spdc',item.value.pdcId,i)"></i></label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>  
            <div class="row ">

                <div class="col-sm-5 text-right">
    
                </div>
                <div class="col-sm-7 text-right">
                     <button class="btn btn-primary dash_href marginAdd" type="button" (click)="onBack()"><a>Back</a></button>
              <button class="btn btn-primary dash_href marginAdd" (click)="onSave()"> Save </button>
              <!-- <button class="btn btn-primary dash_href marginAdd " type="button" (click)="onNext()"><a>Next</a></button>  -->
                    <button class="btn btn-primary dash_href marginAdd" type="button"><a data-toggle="modal"
                            data-target="#myModal">Submit to CPC</a></button>
                    <button class="btn btn-primary dash_href marginAdd" (click)="sendBackToCredit()"
                        *ngIf="roleType == '4'"> Send Back To Credit </button>
    
                </div>
    
            </div>        
        </div>
        <!-- </div> -->
       
    </div>
</form>
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Submit to BM</h4>
            </div>
            <div class="modal-body" >
                <p>Are You Sure Want Submit Record?</p>
            </div>
            <!-- <div class="modal-body" *ngIf = "roleType == '5'">
            <p>Are you sure you want to move lead to CPC maker?</p>
        </div> -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary " (click)="submitTocpc()" 
                    data-dismiss="modal">Yes</button> &nbsp;
                <button type="button" class="btn btn-primary " data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
<div class="modal fade" id="myModaltwo" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">CPC Queue</h4>
            </div>
            <div class="modal-body">
                <p>Lead {{leadId}} is move to CPC Maker Queue</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>