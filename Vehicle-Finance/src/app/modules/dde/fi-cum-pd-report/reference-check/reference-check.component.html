<form
  class="multisteps-form__form"
  [formGroup]="referenceCheckForm"
  *ngIf="referenceCheckForm"
>
  <div class="multisteps-form__panel js-active" data-animation="scaleIn">
    <h4 class="title">{{ labels.referenceCheckTitle }}</h4>
    <div class="row">
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="person_name"
          >{{ labels.personName }} <sub class="star_red_col">*</sub></label
        >
        <!-- <input type="text" class="form-control" id="person_name"> -->
        <app-custom-input
          id="person_name"
          formControlName="nameOfReference"
          placeholder="name of the person"
          [type]="labels?.validationData?.name?.type"
          [isRequired]="'Name is required'"
          [maxLength]="labels?.validationData?.name?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="address_of_the_person"
          >{{ labels.addressOfThePerson }}
          <sub class="star_red_col">*</sub></label
        >
        <!-- <input type="text" class="form-control" id="address_of_the_person"> -->
        <app-custom-input
          id="address_of_the_person"
          formControlName="addressOfReference"
          placeholder="address"
          [isRequired]="'Address is required'"
          [maxLength]="validationData?.fullName?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="contact_number"
          >{{ labels.contactNumber }} <sub class="star_red_col">*</sub></label
        >
        <!-- <input type="text" class="form-control" id="contact_number"> -->
        <!-- <app-custom-input id="contact_number" formControlName="referenceMobile" [patternCheck]="mobileNumberPattern" [isRequired]="'contact number is required'" [maxLength]="maxlength10" [isDirty]="isDirty">
                </app-custom-input> -->
        <app-custom-input
          id="contact_number"
          placeholder="contact number"
          [type]="labels?.validationData?.mobileNumber?.type"
          formControlName="referenceMobile"
          [patternCheck]="labels?.validationData?.mobileNumber?.pattern"
          [isRequired]="'Mobile number is required'"
          [maxLength]="labels?.validationData?.mobileNumber?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="mobile"
          >{{ labels.negativeProfile }} <sub class="star_red_col">*</sub></label
        >
        <app-vf-custom-select
          [values]="[
            { key: '0', value: 'Yes' },
            { key: '1', value: 'No' }
          ]"
          formControlName="negativeProfile"
        >
        </app-vf-custom-select>
      </div>

      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="overall_report"
          >{{ labels.overallReport }} <sub class="star_red_col">*</sub></label
        >
        <!-- <select class="form-control" formControlName="overallFiReport">
                    <option>Select</option>
                    <option value="Positive">Positive</option>
                    <option value="Negative">Negative</option>
                </select> -->
        <app-vf-custom-select
          [values]="[
            { key: '0', value: 'Positive' },
            { key: '1', value: 'Negative' }
          ]"
          formControlName="overallFiReport"
        >
        </app-vf-custom-select>
      </div>
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="remarks"
          >{{ labels.referenceRemarks }}
          <sub class="star_red_col">*</sub></label
        >
        <!-- <input type="text" class="form-control" id="remarks"> -->
        <!-- <app-custom-input id="remarks" formControlName="pdRemarks" [patternCheck]="namePattern" [isRequired]="'remarks are required'" [maxLength]="maxlength30" [isDirty]="isDirty">
                </app-custom-input> -->
        <textarea
          class="form-control mandatory"
          name="pdRemarks"
          id="pdRemarks"
          cols="1"
          rows="3"
          placeholder="remarks"
          formControlName="pdRemarks"
          maxlength="120"
          style="resize: none"
        ></textarea>

        <div
          class="invalid-feedback"
          *ngIf="
            referenceCheckForm.controls['pdRemarks'].touched &&
            !referenceCheckForm.controls['pdRemarks'].vaild
          "
        >
          <div
            *ngIf="
              referenceCheckForm.controls['pdRemarks'].hasError('required')
            "
          >
            remarks are required
          </div>

          <div
            *ngIf="referenceCheckForm.controls['pdRemarks'].hasError('pattern')"
          >
            special characters are not allowed
          </div>
        </div>
      </div>
    </div>
    <h4 class="title">{{ labels.genericDetails }}</h4>
    <div class="row">
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="application_no"
          >{{ labels?.applicationNo }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="applicationNo"
          [className]="'form-control mandatory'"
          [(ngModel)]="applicationNo"
          [placeholder]="'Application No'"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>

      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="product"
          >{{ labels.product }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="product"
          [className]="'form-control mandatory'"
          [placeholder]="'Product'"
          [type]="labels?.validationData?.equitasBranchName?.type"
          [maxLength]="labels?.validationData?.equitasBranchName?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="sourcing_channel">
          {{ labels.sourcingChannel }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="sourcingChannel"
          [className]="'form-control mandatory'"
          [placeholder]="'Sourcing Channel'"
          [type]="labels?.validationData?.equitasBranchName?.type"
          [maxLength]="labels?.validationData?.equitasBranchName?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
    </div>
    <div class="row">
      <!-- <div class="form-group col-sm-6 col-md-3 col-lg-3">
                <label for="mobile">{{ labels.routeMap }}
                    <sub class="star_red_col">*</sub>
                </label>

                <input type="text" class="form-control" id="negativeProfile" formControlName="routeMap" disabled="true" />
            </div> -->
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="equitas_branch_name"
          >{{ labels.equitasBranchName }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="equitasBranchName"
          [className]="'form-control mandatory'"
          [placeholder]="'Equitas Branch Name'"
          [maxLength]="labels?.validationData?.equitasBranchName?.maxLength"
          [type]="labels?.validationData?.equitasBranchName?.type"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>

      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="mobile"
          >{{ labels.distanceEquitasAssetBranch }}
          <sub class="star_red_col">*</sub></label
        >
        <input
          type="text"
          class="form-control"
          id="negativeProfile"
          formControlName="distanceFromEquitas"
        />
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="so_name"
          >{{ labels.soName }} <sub class="star_red_col">*</sub></label
        >

        <app-custom-input
          id="so_name"
          formControlName="soName"
          [isDisabled]="true"
          [maxLength]="maxlength30"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label for="employee_code"
          >{{ labels.employeeCode }} <sub class="star_red_col">*</sub></label
        >

        <app-custom-input
          id="employee_code"
          formControlName="employeeCode"
          [placeholder]="'Employee Code'"
          [isRequired]="' Employee Code is required'"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-3 col-lg-3">
        <label>{{ labels.date }} <sub class="star_red_col">*</sub></label>
        <kendo-datepicker
          class="form-control mandatory"
          formControlName="date"
          [format]="'dd/MM/yyyy'"
          placeholder="Enter Date"
          [activeView]="'decade'"
        ></kendo-datepicker>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="area"
          >{{ labels.area }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="area"
          [className]="'form-control mandatory'"
          [placeholder]="'Area'"
          [isRequired]="' Area is required'"
          [type]="labels?.validationData?.area?.type"
          [maxLength]="labels?.validationData?.area?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="place"
          >{{ labels.place }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="place"
          [className]="'form-control mandatory'"
          [placeholder]="'Place'"
          [type]="labels?.validationData?.area?.type"
          [maxLength]="labels?.validationData?.area?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="timeOf_verification"
          >{{ labels.tomeOfVerification }}
          <sub class="star_red_col">*</sub>
        </label>
        <app-custom-input
          formControlName="timeOfVerification"
          [className]="'form-control mandatory'"
          [placeholder]="'Time of Verification'"
          [type]="labels?.validationData?.timeOfVerification?.type"
          [maxLength]="labels?.validationData?.timeOfVerification?.maxLength"
          [isDirty]="isDirty"
        >
        </app-custom-input>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="b_latitude"
          >{{ labels.branchLat }}
          <!-- <sub class="star_red_col">*</sub> -->
        </label>
        <app-custom-input
          formControlName="bLatitude"
          [className]="'form-control mandatory'"
          [placeholder]="''"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="b_longitude"
          >{{ labels.branchLng }}
          <!-- <sub class="star_red_col">*</sub> -->
        </label>
        <app-custom-input
          formControlName="bLongitude"
          [className]="'form-control mandatory'"
          [placeholder]="''"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="captured_latitude"
          >{{ labels.capturedLat }}
          <!-- <sub class="star_red_col">*</sub> -->
        </label>
        <app-custom-input
          formControlName="latitude"
          [className]="'form-control mandatory'"
          [placeholder]="''"
        >
        </app-custom-input>
      </div>
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="captured_longitude"
          >{{ labels.capturedLng }}
          <!-- <sub class="star_red_col">*</sub> -->
        </label>
        <app-custom-input
          formControlName="longitude"
          [className]="'form-control mandatory'"
          [placeholder]="''"
        >
        </app-custom-input>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="sourceOf_margin_money"
          >{{ labels.selfieImageTitle }}
          <!-- <sub class="star_red_col">*</sub> -->
        </label>
        <div class="photo">
          <img
            [src]="SELFIE_IMAGE || 'assets/images/user.jpg'"
            alt="[Image: Photo]"
            width="100"
          />
        </div>
        <span *ngIf="isMobile">
          <button
            class="btn btn-primary js-btn-prev"
            type="button"
            (click)="showModal = true"
          >
            Take selfie
          </button></span
        >
        <app-upload-modal
          [showModal]="showModal"
          (close)="showModal = false"
          (uploadSuccess)="onUploadSuccess($event)"
          [docsDetails]="selectedDocDetails"
        ></app-upload-modal>
      </div>
      <div *ngIf="showRouteMap" class="form-group col-sm-6 col-md-4 col-lg-3">
        <label for="timeOf_verification">{{ labels.routeMap }} </label>
        <div class="photo">
          <img src="{{ base64Image }}" width="235" />
        </div>
      </div>
    </div>

    <h4 class="title" *ngIf="productCatCode === 'NCV'">
      {{ labels.marketAndFinancierReference }}
    </h4>
    <div class="row" *ngIf="productCatCode === 'NCV'">
      <div class="table-responsive application">
        <table class="table">
          <thead>
            <tr class="table-head-bg text-center">
              <td role="columnheader">{{labels.sNo}} </td>
              <td role="columnheader">
                {{ labels?.typeOfReference }}
              </td>
              <td role="columnheader">
                {{ labels?.companyName }}
              </td>
              <td role="columnheader">
                {{ labels?.officerName }}
              </td>
              <td role="columnheader">
                {{ labels?.designation }}
              </td>
              <td role="columnheader">
                {{ labels?.telNo }}
              </td>
              <td role="columnheader">
                {{ labels?.comments }}
              </td>
              <td role="columnheader">{{ labels.action }}</td>
            </tr>
          </thead>
          <tbody formArrayName="marketAndFinReferDetails">
            <tr
              *ngFor="
                let item of referenceCheckForm.get('marketAndFinReferDetails')[
                  'controls'
                ];
                let i = index
              "
              [formGroupName]="i">
              <td>{{i+1}}</td>
            <td style="min-width: 59px">
              <app-vf-custom-select
                [values]="[
                { key: '0', value: 'Finacier Reference1' },
                { key: '1', value: 'Finacier Reference2' },
                { key: '2', value: 'Market Reference1' },
                { key: '3', value: 'Market Reference2' }
              ]"
                formControlName="referenceName"
                [isRequired]="'Please select alteast one '"
              >
              </app-vf-custom-select>
            </td>
            <td>
              <app-custom-input
                [className]="'form-control mandatory'"
                formControlName="companyName"
                [maxLength]="labels?.validationData?.companyName?.maxLength"
                [type]="labels?.validationData?.companyName?.type"
                [isRequired]="'*required'"
                [isDirty]="isDirty"
              ></app-custom-input>
            </td>
            <td>
              <app-custom-input
                [className]="'form-control mandatory'"
                formControlName="officerName"
                [maxLength]="labels?.validationData?.officerName?.maxLength"
                [type]="labels?.validationData?.officerName?.type"
                [isRequired]="'*required'"
                [isDirty]="isDirty"
              ></app-custom-input>
            </td>
            <td>
              <app-custom-input
                [className]="'form-control mandatory'"
                formControlName="designation"
                [maxLength]="labels?.validationData?.companyName?.maxLength"
                [type]="labels?.validationData?.companyName?.type"
                [isRequired]="'*required'"
                [isDirty]="isDirty"
              ></app-custom-input>
            </td>
            <td>
              <app-custom-input
                [className]="'form-control mandatory'"
                formControlName="telNo"
                [patternCheck]="inputValidation"
                [maxLength]="labels?.validationData?.landlineNumber?.maxLength"
                [type]="labels?.validationData?.landlineNumber?.type"
                [isRequired]="'*required'"
                [isDirty]="isDirty"
              ></app-custom-input>
            </td>
            <td>
              <app-custom-input
                [className]="'form-control mandatory'"
                formControlName="comments"
                [maxLength]="labels?.validationData?.comments?.maxLength"
                [type]="labels?.validationData?.comments?.type"
                [isRequired]="'*required'"
                [isDirty]="isDirty"
              ></app-custom-input>
            </td>
            <td>
              <button
                class="fa fa-plus"
                aria-hidden="true"
                id="addmorePOIbutton"
                value="Add"
                [disabled]="disableSaveBtn"
                (click)="addNewRow()"
              ></button>
              <button
                type="button"
                class="fa fa-minus"
                aria-hidden="true"
                id="delPOIbutton"
                [disabled]="disableSaveBtn"
                value="Delete"
                (click)="deleteRow(i, referenceCheckForm.value.marketAndFinReferDetails)"
              ></button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- <p>{{ labels.routeMap }}</p> -->
    <!-- <div class="row"> -->
    <!-- <label for="remarks">{{ labels.routeMap }}</label> -->
    <!-- src="https://maps.googleapis.com/maps/api/staticmap?sensor=false&size=800x400&markers=color:blue%7Clabel:S%7C12.96186,80.20078&&markers=color:red%7Clabel:C%7C12.98714,80.17511&&center=12.9982906,80.2009504|12.9618433,80.1750283&zoom=13&path=color:blue|weight:6|enc:orbnAqfohNiBKQ?ED@zBYnDE%60@MjCGL%7B@B@FI~@k@zCa@lBEHmApBMPK?%7BBIAd@QfBKx@Bf@@%5EQ%60Ac@tCG%60BBz@KbAi@lDw@zFgAnJgCw@k@IgBk@mDeAuCkAaCw@cBm@USu@SuAg@%7DBu@wFkBcEkAwFyAu@UcAa@%7BBmAg@SUKoAs@m@Sy@OaBKeC_@eA%5DsAy@m@e@SYyBiAs@%5BuD%7BAkCqAqAc@YO%5BKe@R%7B@TaBTwAHk@?qC?%7B@DyCf@cARkEt@%7DA@mB@iBEsDGa@Hq@b@e@%60@s@dAmClEWZWLYHeBJgAD%7DA?sKDwFFA@ABEBEBMAGCoAz@mA%60AoB~AHH%60CfDbB%60CfApAxAzAtAjBv@%7CAdAfCx@lB%7C@%60C%60DbI%60DdH%7CAxC~AdCnErGrCxDrBjCj@~@ID%5BV%7D@v@zEbGlAxANHJLh@v@PTZD%60@ZVTLFLTd@%7C@c@XH%5CJb@&key=AIzaSyDJ9TZyUZNB2uY_267eIUQCV72YiYmArIw" -->
    <!-- <img [src]="" alt="route map" width="800" height="400" /> -->
    <!-- </div> -->
    &nbsp;
    <div class="row">
      <div class="btn-sec clear-both">
        <div class="col-sm-7"></div>
        <div
          class="col-sm-5 text-right"
          *ngIf="
            roleType == '2' && version != 'undefined' && showReinitiate == true
          "
        >
          <button class="btn btn-danger" type="button" (click)="reinitiatePd()">
            {{ labels.reinitiate }}</button
          >&nbsp;
          <!-- <button class="btn btn-success" (click)="approvePd()" [disabled]="disableSaveBtn">
                        {{ labels.approve }}
                    </button> -->
        </div>
      </div>

      <div class="btn-sec clear-both">
        <div class="col-sm-4">
          <button
            class="btn btn-primary"
            type="button"
            (click)="onNavigateToPdSummary()"
          >
            Back to PD List
          </button>
        </div>
        <div class="col-sm-8 text-right">
          <button
            class="btn btn-primary"
            type="button"
            (click)="onNavigateBack()"
          >
            Back
          </button>
          <p
            class="btn btn-primary"
            (click)="onFormSubmit()"
            *ngIf="!disableSaveBtn"
          >
            {{ labels.save }}
          </p>

          <!-- <button
            type="button"
            class="btn btn-primary"
            data-toggle="modal"
            data-target="#myModal"
            (click)="submitToCredit()"
          >
            {{ labels.submit }}
          </button> -->
          <a
            data-toggle="modal"
            data-target="#mySubmitModel"
            id="reject_credit"
            *ngIf="showSubmit"
          >
            <p type="button" class="btn btn-primary">{{ labels.submit }}</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</form>
<div class="modal" id="mySubmitModel">
  <div class="modal-dialog">
    <div class="modal-content">
      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title"></h4>
        <button type="button" class="close" data-dismiss="modal">
          &times;
        </button>
      </div>

      <!-- Modal body -->
      <div class="modal-body" style="text-align: center">
        <p>{{ labels.submitToCredit }}</p>
      </div>

      <!-- Modal footer -->
      <div class="modal-footer text-center">
        <button
          type="button"
          class="btn btn-success"
          data-dismiss="modal"
          id="reject_yes_val"
          value="Yes"
          (click)="submitToCredit()"
        >
          {{ labels.yes }}
        </button>
        <button type="button" class="btn btn-danger" data-dismiss="modal">
          {{ labels.cancel }}
        </button>
      </div>
    </div>
  </div>
</div>
