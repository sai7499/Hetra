<main class="mar-top90">
  <div class="container-fluid">
    <app-lead-section-header></app-lead-section-header>

    <div class="" style="margin: 10px;">

      <div class="clearfix">
        <form [formGroup]="queryModalForm">
          <div class="query">
            <div class="col-sm-4 left">
              <!-- <form class="form-horizontal"> -->
              <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12 p-0">
                <div class="input-group search-btn">
                  <input type="text" class="form-control input-search" placeholder="Search"
                    formControlName="searchName" (keyup)="getLeads($event.target.value)">
                  <span class="input-group-addon glass-span"><i class="fa fa-search"></i></span>
                </div>
              </div>
              <!-- </form> -->

              <br /><br />
              <div class="panel-group mar-20 row" style="height: 500px;overflow-x: hidden; overflow-y: scroll;">
                <div class="panel-group mar-20" id="accordion"
                  *ngFor="let chat of chatList | search : queryModalForm.value.searchName.trim().length ? queryModalForm.value.searchName : '' : 'leadId' || 'name': 'product'; let i=index; let last=last">
                  <div class="flex-container">
                    <div class="small" (click)="getQueries(chat)">
                      <p class="mar-em">{{chat.leadId}}</p>
                    </div>
                    <div class="">
                      <p class="mar-em">{{chat.leadId}} - {{chat.product}} - {{chat.name}}</p>
                    </div>
                  </div>
                  <hr>
                </div>
              </div>

              <div class="panel-group mar-20" id="accordion">
                <div class="panel panel-default">
                  <div class="panel-heading" id="headingOne">
                    <h4 class="panel-title">
                      <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseOne">
                        <i class="fa fa-user"></i>&nbsp; Stakeholders <i class="fa fa-angle-down"></i>
                      </a>
                    </h4>
                  </div>
                  <div id="collapseOne" class="panel-collapse collapse">
                    <div class="panel-body">

                      <form class="clearfix">
                        <div class="form-group col-xs-12">
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search">
                            <span class="input-group-addon"><i class="fa fa-search"></i></span>
                          </div>
                        </div>
                        <div class="stakeholder-list">
                          <div *ngFor="let stack of queryModelLov.queryTo">
                            <div class="radio"><label><input type="radio" name="radio"> {{stack.value}} <span
                                  class="checkmark"></span></label></div>
                          </div>
                        </div>
                        <div class="stakeholder-bot text-right">
                          <button type="submit" class="btn btn-default mar-right8">Cancel</button>
                          <button type="submit" class="btn btn-primary">Add</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>

                <div class="panel panel-default">
                  <div class="panel-heading" id="headingTwo">
                    <h4 class="panel-title">
                      <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo">
                        <i class="fa fa-file"></i>&nbsp; Documents Shared <i class="fa fa-angle-down"></i>
                      </a>
                    </h4>
                  </div>
                  <div id="collapseTwo" class="panel-collapse collapse">
                    <div class="panel-body">
                      <form>
                        <div class="form-group col-xs-12">
                          <div class="input-group">
                            <input type="text" class="form-control" placeholder="Search">
                            <span class="input-group-addon"><i class="fa fa-search"></i></span>
                          </div>
                        </div>
                      </form>
                      <div class="document-shared-list">
                        <p><a href="#">ID: 12345 - Aadhar Card</a></p>
                        <p><a href="#">ID: 67891 - Pancard</a></p>
                        <p><a href="#">ID: 23456 - Address Proof</a></p>
                        <p><a href="#">ID: 12340 - Document_Name</a></p>
                        <p><a href="#">ID: 67890 - Passport</a></p>
                        <p><a href="#">ID: 23458 - Account Opening Form</a></p>
                        <p><a href="#">ID: 67890 - Bank Pass Book</a></p>
                        <p><a href="#">ID: 23458 - Voter Id</a></p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>


            </div>

            <div class="col-sm-8 right">
              <div class="row chat-box" *ngFor="let message of chatMessages; let j=index;let last=last;">

                <div class="wt-80 receiver" *ngIf="message.queryFrom !== userId">
                  <div class="receive-message">
                    <div class="logged-user">E1850 - Dinesh Subramaniyam, <small> [ Credit Officer ]</small></div>
                    <p>Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin
                      commodo.
                      Cras purus odio, vestibulum in vulputate at, tempus viverra turpis. </p>
                    <div class="tagged-name">
                      <span><strong>Tagged To : </strong> E1923 - Dhanapal Nataraj </span>
                      <span class="date-time"> 23-APR-2020 | 11:00 AM </span>
                    </div>
                  </div>
                </div>
                <div class="wt-80 sender" *ngIf="message.queryFrom === userId">
                  <div class="send-message">
                    <div class="logged-user">{{message.fromName}} <small> [ Sales Officer ]</small></div>
                    <p>{{message.query}}</p>
                    <div *ngIf="message.docId"><a href="#" class="text-danger"> <i class="fa fa-file-pdf-o"></i> Aadhar
                        Card.pdf</a></div>
                    <br />
                    <div class="tagged-name">
                      <span> <strong>Tagged To : </strong> {{message.queryTo}} </span>
                      <span class="date-time"> 23-APR-2020 | 10:00 AM </span>
                    </div>
                  </div>

                </div>
              </div>

              <div class="form-group row">
                <div class="col-lg-6 col-sm-6 col-md-4 col-xs-6">
                  <div class="form-group">
                    <label class="col-sm-4">Query Type</label>
                    <div class="col-sm-8">
                      <app-vf-custom-select [values]="queryModelLov?.queryType" [id]="'query_type'"
                        formControlName="queryType" [isRequired]="'Query Type Required'" [isDirty]="isDirty">
                      </app-vf-custom-select>
                    </div>
                  </div>
                </div>
                <div class="col-lg-6 col-sm-6 col-md-4 col-xs-6">
                  <div class="form-group">
                    <label class="col-sm-4">Tag query To</label>
                    <div class="col-sm-8">
                      <input type="text" class="form-control" autocomplete="off" formControlName="queryTo"
                        (mouseover)="mouseEnter()" (keyup)="getvalue($event.target.value)">

                      <div class="dropdown-content " *ngIf="dropDown">
                        <div *ngFor="let item of searchLead">
                          <a data-toggle="collapse" data-target="#bs-navbar">{{item.value}}</a>
                        </div>
                      </div>

                    </div>
                  </div>
                </div>
              </div>

              <div class="form-group row">

                <div class="col-lg-6 col-sm-6 col-md-4 col-xs-6">
                  <div class="form-group">
                    <label for="file-upload" class="col-sm-4">Attachment</label>
                    <div class="upload-btn-wrapper col-sm-8">
                      <button class="btn-upload">Choose file</button>
                      <input type="file" id="file-upload">
                      <span id="file-name"></span>
                      <h6>&nbsp;(Maximum size: 2 MB)</h6>
                    </div>
                  </div>
                </div>

                <div class="col-lg-6 col-sm-6 col-md-6 col-xs-6">
                  <div class="form-group">
                    <label for="file-upload" class="col-sm-4">Lead Id</label>
                    <div class="upload-btn-wrapper col-sm-5">
                      <app-custom-input formControlName="leadId" [id]="'lead_id'" [className]="'form-control mandatory'"
                        [placeholder]="'Lead Id'" [isRequired]="'Lead Id Required'" [isDirty]="isDirty"
                        [isDisabled]="true">
                      </app-custom-input>
                    </div>
                    <label for="file-upload" class="col-sm-1">*mandatory</label>
                  </div>
                </div>
              </div>

              <div class="form-group row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                  <textarea class="form-control" style="resize: none;" formControlName="query"></textarea>

                  <div class="invalid-feedback"
                    *ngIf="queryModalForm.controls['query'].touched && !queryModalForm.controls['query'].valid">
                    <div *ngIf="queryModalForm.controls['query'].hasError('required')">
                      Query Required
                    </div>
                  </div>

                </div>
              </div>

              <div class="btn-sec clear-both row cst_btm_btns mar-bot-btn">
                <div class="col-sm-5">

                </div>
                <div class="col-sm-7 text-right">
                  <button class="btn btn-primary dash_href" type="button"
                    (click)="onFormSubmit(queryModalForm)">Send</button>
                </div>
              </div>

            </div>

          </div>
        </form>
      </div>
    </div>

  </div>
</main>